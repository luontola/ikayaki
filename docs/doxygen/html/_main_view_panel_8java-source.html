<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Squid: My Documents/squid/src/ikayaki/gui/MainViewPanel.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">My Documents</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">squid</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">ikayaki</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">gui</a></div>
<h1>MainViewPanel.java</h1><a href="_main_view_panel_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * MainViewPanel.java</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2005 Project SQUID, http://www.cs.helsinki.fi/group/squid/</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * This file is part of Ikayaki.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Ikayaki is free software; you can redistribute it and/or modify</span>
00009 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00010 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00011 <span class="comment"> * (at your option) any later version.</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> * Ikayaki is distributed in the hope that it will be useful,</span>
00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
00016 <span class="comment"> * GNU General Public License for more details.</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00019 <span class="comment"> * along with Ikayaki; if not, write to the Free Software</span>
00020 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
00021 <span class="comment"> */</span>
00022 
00023 <span class="keyword">package </span>ikayaki.gui;
00024 
00025 <span class="keyword">import</span> ikayaki.Ikayaki;
00026 <span class="keyword">import</span> ikayaki.Project;
00027 <span class="keyword">import</span> ikayaki.ProjectEvent;
00028 <span class="keyword">import</span> ikayaki.Settings;
00029 <span class="keyword">import</span> ikayaki.squid.SerialIO;
00030 <span class="keyword">import</span> ikayaki.squid.Squid;
00031 <span class="keyword">import</span> ikayaki.util.ComponentPrinter;
00032 
00033 <span class="keyword">import</span> javax.swing.*;
00034 <span class="keyword">import</span> java.awt.*;
00035 <span class="keyword">import</span> java.awt.event.ActionEvent;
00036 <span class="keyword">import</span> java.awt.event.ActionListener;
00037 <span class="keyword">import</span> java.awt.event.KeyEvent;
00038 <span class="keyword">import</span> java.io.BufferedInputStream;
00039 <span class="keyword">import</span> java.io.File;
00040 <span class="keyword">import</span> java.io.IOException;
00041 
<a name="l00048"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html">00048</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html">MainViewPanel</a> <span class="keyword">extends</span> <a class="code" href="classikayaki_1_1gui_1_1_project_component.html">ProjectComponent</a> {
00049 
<a name="l00050"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v0">00050</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v0">DIVIDER_DEFAULT_LOCATION</a> = 300;
<a name="l00051"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v1">00051</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v1">DIVIDER_SIZE</a> = 5;
00052 
<a name="l00056"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r0">00056</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1squid_1_1_squid.html">Squid</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r0">squid</a>;
00057 
<a name="l00061"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r1">00061</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r1">project</a> = <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00062 
<a name="l00066"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r2">00066</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r2">latestMeasuringProject</a> = <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00067 
00068     <span class="comment">/* GUI Components */</span>
<a name="l00069"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r3">00069</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_main_menu_bar.html">MainMenuBar</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r3">menuBar</a>;
<a name="l00070"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r4">00070</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_main_status_bar.html">MainStatusBar</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r4">statusBar</a>;
00071 
<a name="l00072"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">00072</a>     <span class="keyword">private</span> JSplitPane <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>;
<a name="l00073"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r6">00073</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_project_explorer_panel.html">ProjectExplorerPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r6">projectExplorerPanel</a>;
<a name="l00074"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r7">00074</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_calibration_panel.html">CalibrationPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r7">calibrationPanel</a>;
00075 
<a name="l00076"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r8">00076</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_project_information_panel.html">ProjectInformationPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r8">projectInformationPanel</a>;
<a name="l00077"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r9">00077</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_sequence_panel.html">MeasurementSequencePanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r9">measurementSequencePanel</a>;
<a name="l00078"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r10">00078</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_controls_panel.html">MeasurementControlsPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r10">measurementControlsPanel</a>;
<a name="l00079"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r11">00079</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_details_panel.html">MeasurementDetailsPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r11">measurementDetailsPanel</a>;
<a name="l00080"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r12">00080</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_graphs_panel.html">MeasurementGraphsPanel</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r12">measurementGraphsPanel</a>;
00081 
00082     <span class="comment">/* Swing Actions */</span>
<a name="l00083"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r13">00083</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r13">newProjectAction</a>;
<a name="l00084"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r14">00084</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r14">openProjectAction</a>;
<a name="l00085"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r15">00085</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r15">exportProjectToDATAction</a>;
<a name="l00086"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r16">00086</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r16">exportProjectToDTDAction</a>;
<a name="l00087"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r17">00087</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r17">exportProjectToSRMAction</a>;
<a name="l00088"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r18">00088</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r18">printAction</a>;
<a name="l00089"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r19">00089</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r19">printPreviewAction</a>;
<a name="l00090"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r20">00090</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r20">exitAction</a>;
<a name="l00091"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r21">00091</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r21">programSettingsAction</a>;
<a name="l00092"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r22">00092</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r22">deviceSettingsAction</a>;
<a name="l00093"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r23">00093</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r23">helpAction</a>;
<a name="l00094"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r24">00094</a>     <span class="keyword">private</span> Action <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r24">aboutAction</a>;
00095 
<a name="l00102"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a0">00102</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a0">MainViewPanel</a>(<a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r1">project</a>) {
00103 
00104         <span class="comment">// if project is null, load the last open project</span>
00105         <span class="keywordflow">if</span> (project == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00106             File[] projectHistory = <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getProjectHistory();
00107             <span class="keywordflow">if</span> (projectHistory.length &gt; 0) {
00108                 project = <a class="code" href="classikayaki_1_1_project.html">Project</a>.<a class="code" href="classikayaki_1_1_project.html#e5">loadProject</a>(projectHistory[0]);
00109             }
00110         }
00111 
00112         <span class="comment">/* Init SQUID interface */</span>
00113         <span class="keyword">new</span> Thread() {
00114             @Override <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
00115                 <span class="keywordflow">try</span> {
00116                     <span class="keyword">final</span> <a class="code" href="classikayaki_1_1squid_1_1_squid.html">Squid</a> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r0">squid</a> = <a class="code" href="classikayaki_1_1squid_1_1_squid.html">Squid</a>.<a class="code" href="classikayaki_1_1squid_1_1_squid.html#v0">instance</a>();       <span class="comment">// might take a long time</span>
00117                     <span class="keywordflow">if</span> (!squid.<a class="code" href="classikayaki_1_1squid_1_1_squid.html#a4">isOK</a>()) {
00118                         JOptionPane.showMessageDialog(<a class="code" href="classikayaki_1_1gui_1_1_project_component.html#a3">getParentFrame</a>(),
00119                                 <span class="stringliteral">"SQUID is not OK!"</span>, <span class="stringliteral">"Squid error"</span>, JOptionPane.ERROR_MESSAGE);
00120                         <span class="keywordflow">return</span>;
00121                     }
00122                     SwingUtilities.invokeLater(<span class="keyword">new</span> Runnable() {
00123                         <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
00124                             <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a2">setSquid</a>(squid);
00125                         }
00126                     });
00127 
00128                 } <span class="keywordflow">catch</span> (IOException e) {
00129                     <span class="comment">// TODO: what should be done now? give error message?</span>
00130                     <span class="comment">//e.printStackTrace();</span>
00131                     System.err.println(<span class="stringliteral">"Unable to initialize the SQUID interface."</span>);
00132                 }
00133             }
00134         }.start();
00135 
00136         <span class="comment">/* Lay out GUI components */</span>
00137         <span class="keyword">final</span> JPanel left = <span class="keyword">new</span> JPanel(<span class="keyword">new</span> GridBagLayout());
00138         <span class="keyword">final</span> JPanel right = <span class="keyword">new</span> JPanel(<span class="keyword">new</span> GridBagLayout());
00139         GridBagConstraints gc = <span class="keyword">new</span> GridBagConstraints();
00140         gc.fill = GridBagConstraints.BOTH;
00141 
00142         <span class="comment">// build left tab</span>
00143         gc.gridx = 0;
00144         gc.gridy = 0;
00145         gc.weightx = 1.0;
00146         gc.weighty = 0.0;
00147         left.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a17">getCalibrationPanel</a>(), gc);
00148         gc.gridx = 0;
00149         gc.gridy = 1;
00150         gc.weightx = 1.0;
00151         gc.weighty = 1.0;
00152         left.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a18">getProjectExplorerPanel</a>(), gc);
00153         gc.gridx = 0;
00154         gc.gridy = 2;
00155         gc.weightx = 1.0;
00156         gc.weighty = 0.0;
00157         left.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a16">getProjectInformationPanel</a>(), gc);
00158 
00159         <span class="comment">// build right tab</span>
00160         gc.gridx = 0;
00161         gc.gridy = 0;
00162         gc.weightx = 1.0;
00163         gc.weighty = 1.0;
00164         right.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a15">getMeasurementSequencePanel</a>(), gc);
00165         gc.gridx = 1;
00166         gc.gridy = 0;
00167         gc.weightx = 0.0;
00168         gc.weighty = 1.0;
00169         right.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a14">getMeasurementControlsPanel</a>(), gc);
00170         <span class="keywordflow">if</span> (<span class="keyword">false</span>) {
00171             gc.gridx = 0;
00172             gc.gridy = 1;
00173             gc.weightx = 1.0;
00174             gc.weighty = 0.0;
00175             right.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a13">getMeasurementDetailsPanel</a>(), gc);
00176             gc.gridx = 1;
00177             gc.gridy = 1;
00178             gc.weightx = 0.0;
00179             gc.weighty = 0.0;
00180             right.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a12">getMeasurementGraphsPanel</a>(), gc);
00181         } <span class="keywordflow">else</span> {
00182             <span class="comment">// more space for the graphs</span>
00183             JPanel bottom = <span class="keyword">new</span> JPanel(<span class="keyword">new</span> BorderLayout());
00184             bottom.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a13">getMeasurementDetailsPanel</a>(), BorderLayout.WEST);
00185             bottom.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a12">getMeasurementGraphsPanel</a>(), BorderLayout.CENTER);
00186             gc.gridx = 0;
00187             gc.gridy = 1;
00188             gc.gridwidth = 2;
00189             gc.weightx = 1.0;
00190             gc.weighty = 0.0;
00191             right.add(bottom, gc);
00192         }
00193 
00194         <span class="comment">// configure tabs</span>
00195         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a> = <span class="keyword">new</span> JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
00196         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setLeftComponent(left);
00197         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setRightComponent(right);
00198         <span class="comment">//splitPane.setOneTouchExpandable(true);</span>
00199         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setContinuousLayout(<span class="keyword">true</span>);
00200         <span class="comment">//splitPane.setDividerLocation(Math.max(DIVIDER_DEFAULT_LOCATION, left.getPreferredSize().width));</span>
00201         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerLocation(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v0">DIVIDER_DEFAULT_LOCATION</a>);
00202         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setResizeWeight(0.0);
00203         <span class="comment">//splitPane.setEnabled(false);</span>
00204         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setBorder(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00205         <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerSize(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#v1">DIVIDER_SIZE</a>);
00206 
00207         <span class="comment">// prevent the left tab from being resized when the window is resized</span>
00208         Dimension d = left.getMinimumSize();
00209         d.width = DIVIDER_DEFAULT_LOCATION / 2;
00210         left.setMinimumSize(d);
00211 
00212         <span class="comment">// button for hiding the tabs</span>
00213         <span class="comment">// TODO: make this as an Action?</span>
00214         Box tabControls = <span class="keyword">new</span> Box(BoxLayout.Y_AXIS);
00215         <span class="keyword">final</span> Icon tabButtonDown = <span class="keyword">new</span> ImageIcon(ClassLoader.getSystemResource(<span class="stringliteral">"resources/projectExplorerTabDown.png"</span>));
00216         <span class="keyword">final</span> Icon tabButtonUp = <span class="keyword">new</span> ImageIcon(ClassLoader.getSystemResource(<span class="stringliteral">"resources/projectExplorerTabUp.png"</span>));
00217         <span class="keyword">final</span> JButton tabButton = <span class="keyword">new</span> JButton(tabButtonDown);
00218         tabButton.setContentAreaFilled(<span class="keyword">false</span>);
00219         tabButton.setBorder(null);
00220         tabButton.setFocusable(<span class="keyword">false</span>);
00221         tabButton.setMnemonic(<span class="charliteral">'P'</span>);
00222         tabButton.addActionListener(<span class="keyword">new</span> ActionListener() {
00223             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00224                 <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.getDividerLocation() == 0) {
00225                     <span class="comment">// show tab</span>
00226                     <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerLocation(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.getLastDividerLocation());
00227                     <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerSize(DIVIDER_SIZE);
00228                     tabButton.setIcon(tabButtonDown);
00229                 } <span class="keywordflow">else</span> {
00230                     <span class="comment">// hide tab</span>
00231                     <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerLocation(0);
00232                     <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#r5">splitPane</a>.setDividerSize(0);
00233                     tabButton.setIcon(tabButtonUp);
00234                 }
00235             }
00236         });
00237         tabControls.add(tabButton);
00238         tabControls.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
00239 
00240         <span class="comment">// master layout</span>
00241         setLayout(<span class="keyword">new</span> BorderLayout());
00242         add(splitPane, <span class="stringliteral">"Center"</span>);
00243         add(tabControls, <span class="stringliteral">"West"</span>);
00244         setBackground(<span class="keyword">new</span> Color(247, 243, 239));
00245 
00246 <span class="comment">//        // TODO: testing... initialize with no project</span>
00247 <span class="comment">//        setProject(null);</span>
00248 
00249         <span class="comment">/* Initialize everything with the loaded project or null */</span>
00250         setProject(<a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>);
00251     }
00252 
<a name="l00257"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a1">00257</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1squid_1_1_squid.html">Squid</a> getSquid() {
00258         <span class="keywordflow">return</span> squid;
00259     }
00260 
<a name="l00269"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a2">00269</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> setSquid(<a class="code" href="classikayaki_1_1squid_1_1_squid.html">Squid</a> squid) {
00270         <span class="keywordflow">if</span> (squid == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00271             <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException();
00272         }
00273         <span class="keywordflow">if</span> (<span class="keyword">this</span>.squid != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00274             <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException();
00275         }
00276         <span class="keyword">this</span>.squid = squid;
00277         setProject(getProject());
00278     }
00279 
<a name="l00283"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a3">00283</a>     @Override <span class="keyword">public</span> <a class="code" href="classikayaki_1_1_project.html">Project</a> getProject() {
00284         <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>;
00285     }
00286 
<a name="l00293"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a4">00293</a>     @Override <span class="keyword">public</span> <span class="keywordtype">void</span> setProject(<a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>) {
00294         <span class="keywordflow">if</span> (project != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00295             <span class="comment">// update history logs</span>
00296             <span class="keywordflow">if</span> (project.<a class="code" href="classikayaki_1_1_project.html#e8">getType</a>() != <a class="code" href="classikayaki_1_1_project.html">Project</a>.Type.CALIBRATION) {
00297                 <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.updateProjectHistory(project.<a class="code" href="classikayaki_1_1_project.html#a7">getFile</a>());
00298                 <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.updateDirectoryHistory(project.<a class="code" href="classikayaki_1_1_project.html#a7">getFile</a>().getAbsoluteFile().getParentFile());
00299             }
00300 
00301             <span class="comment">// register the new project</span>
00302             project.<a class="code" href="classikayaki_1_1_project.html#a35">addProjectListener</a>(<span class="keyword">this</span>);
00303             project.<a class="code" href="classikayaki_1_1_project.html#a15">setSquid</a>(squid);        <span class="comment">// will do nothing if another project has a measurement running</span>
00304 
00305             <span class="comment">// update GUI components</span>
00306             Frame parent = getParentFrame();
00307             <span class="keywordflow">if</span> (parent != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00308                 parent.setTitle(project.<a class="code" href="classikayaki_1_1_project.html#a7">getFile</a>().getAbsolutePath());
00309             } <span class="keywordflow">else</span> {
00310                 <span class="comment">// set the title after the program has fully started</span>
00311                 SwingUtilities.invokeLater(<span class="keyword">new</span> Runnable() {
00312                     <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
00313                         getParentFrame().setTitle(getProject().getFile().getAbsolutePath());
00314                     }
00315                 });
00316             }
00317             getProjectInformationPanel().setBorder(
00318                     BorderFactory.createTitledBorder(project.<a class="code" href="classikayaki_1_1_project.html#a12">getName</a>() + <span class="stringliteral">" ("</span> + project.<a class="code" href="classikayaki_1_1_project.html#e8">getType</a>() + <span class="stringliteral">" Project)"</span>));
00319             getExportProjectToDATAction().setEnabled(<span class="keyword">true</span>);
00320             getExportProjectToTDTAction().setEnabled(<span class="keyword">true</span>);
00321             getExportProjectToSRMAction().setEnabled(<span class="keyword">true</span>);
00322             getPrintAction().setEnabled(<span class="keyword">true</span>);
00323             getPrintPreviewAction().setEnabled(<span class="keyword">true</span>);
00324         } <span class="keywordflow">else</span> {
00325             <span class="comment">// no project open, update GUI components</span>
00326             Frame parent = getParentFrame();
00327             <span class="keywordflow">if</span> (parent != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00328                 getParentFrame().setTitle(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00329             }
00330             getProjectInformationPanel().setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Project Information"</span>));
00331             getExportProjectToDATAction().setEnabled(<span class="keyword">false</span>);
00332             getExportProjectToTDTAction().setEnabled(<span class="keyword">false</span>);
00333             getExportProjectToSRMAction().setEnabled(<span class="keyword">false</span>);
00334             getPrintAction().setEnabled(<span class="keyword">false</span>);
00335             getPrintPreviewAction().setEnabled(<span class="keyword">false</span>);
00336         }
00337 
00338         <span class="comment">// switch to the new project</span>
00339         <a class="code" href="classikayaki_1_1_project.html">Project</a> oldProject = <span class="keyword">this</span>.project;
00340         <span class="keyword">this</span>.project = project;
00341 
00342         getProjectExplorerPanel().setProject(project);
00343         getCalibrationPanel().setProject(project);
00344         getProjectInformationPanel().setProject(project);
00345         getMeasurementSequencePanel().setProject(project);
00346         getMeasurementControlsPanel().setProject(project);
00347         getMeasurementDetailsPanel().setProject(project);
00348         getMeasurementGraphsPanel().setProject(project);
00349 
00350         <span class="comment">// close the previous project if it is not the latest measuring project</span>
00351         <span class="keywordflow">if</span> (oldProject != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> &amp;&amp; oldProject != project &amp;&amp; oldProject != latestMeasuringProject) {
00352             <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_project.html">Project</a>.closeProject(oldProject)) {
00353                 JOptionPane.showMessageDialog(getParentFrame(),
00354                         <span class="stringliteral">"Unable to close the project "</span> + oldProject.<a class="code" href="classikayaki_1_1_project.html#a12">getName</a>(),
00355                         <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00356             }
00357         }
00358     }
00359 
<a name="l00363"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a5">00363</a>     @Override <span class="keyword">public</span> <span class="keywordtype">void</span> projectUpdated(<a class="code" href="classikayaki_1_1_project_event.html">ProjectEvent</a> event) {
00364         <span class="keywordflow">if</span> (event.<a class="code" href="classikayaki_1_1_project_event.html#a2">getType</a>() == <a class="code" href="classikayaki_1_1_project_event.html">ProjectEvent</a>.Type.STATE_CHANGED) {
00365 
00366             <span class="comment">// keep track of which project has a measurement running</span>
00367             <span class="keywordflow">if</span> (event.<a class="code" href="classikayaki_1_1_project_event.html#a1">getProject</a>().getState() != <a class="code" href="classikayaki_1_1_project.html">Project</a>.State.IDLE) {
00368 
00369                 <span class="comment">// close the previous measuring project if it is no more open</span>
00370                 <span class="keywordflow">if</span> (latestMeasuringProject != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>
00371                         &amp;&amp; latestMeasuringProject != <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>
00372                         &amp;&amp; latestMeasuringProject != event.<a class="code" href="classikayaki_1_1_project_event.html#a1">getProject</a>()) {
00373                     <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_project.html">Project</a>.closeProject(latestMeasuringProject)) {
00374                         JOptionPane.showMessageDialog(getParentFrame(),
00375                                 <span class="stringliteral">"Unable to close the project "</span> + latestMeasuringProject.getName(),
00376                                 <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00377                     }
00378                 }
00379                 latestMeasuringProject = event.<a class="code" href="classikayaki_1_1_project_event.html#a1">getProject</a>();
00380             }
00381             <span class="keywordflow">return</span>;
00382         }
00383     }
00384 
<a name="l00389"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a6">00389</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> exitProgram() {
00390 
00391         <span class="comment">// must not exit if a measurement is running</span>
00392         <span class="keywordflow">if</span> (latestMeasuringProject != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> &amp;&amp; latestMeasuringProject.getState() != <a class="code" href="classikayaki_1_1_project.html">Project</a>.State.IDLE) {
00393             JOptionPane.showMessageDialog(getParentFrame(),
00394                     <span class="stringliteral">"Can not exit. A measurement is running."</span>,
00395                     <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00396             <span class="keywordflow">return</span>;
00397         }
00398 
00399         <span class="comment">// ensure that all settings will be saved</span>
00400         <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_settings.html">Settings</a>.saveNow()) {
00401             JOptionPane.showMessageDialog(getParentFrame(),
00402                     <span class="stringliteral">"Can not exit. Unable to save the settings."</span>,
00403                     <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00404             <span class="keywordflow">return</span>;
00405         }
00406 
00407         <span class="comment">// close the active project</span>
00408         setProject(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00409 
00410         <span class="comment">// close the latest measuring project (if same as the active project, it was not close by setProject(null))</span>
00411         <span class="keywordflow">if</span> (latestMeasuringProject != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00412             <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_project.html">Project</a>.closeProject(latestMeasuringProject)) {
00413                 JOptionPane.showMessageDialog(getParentFrame(),
00414                         <span class="stringliteral">"Can not exit. Unable to close the project "</span> + latestMeasuringProject.getName() + <span class="stringliteral">"."</span>,
00415                         <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00416                 <span class="keywordflow">return</span>;
00417             }
00418         }
00419 
00420         <span class="comment">// close all projects in the cache</span>
00421         <a class="code" href="classikayaki_1_1_project.html">Project</a>[] cachedProjects = <a class="code" href="classikayaki_1_1_project.html">Project</a>.getCachedProjects();
00422         <span class="keywordflow">for</span> (<a class="code" href="classikayaki_1_1_project.html">Project</a> cached : cachedProjects) {
00423             System.err.println(<span class="stringliteral">"Found a cached project, closing it: "</span> + cached.getFile());
00424             <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_project.html">Project</a>.closeProject(cached)) {
00425                 JOptionPane.showMessageDialog(getParentFrame(),
00426                         <span class="stringliteral">"Can not exit. Unable to close the (cached) project "</span> + cached.getName() + <span class="stringliteral">"."</span>,
00427                         <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00428                 <span class="keywordflow">return</span>;
00429             }
00430         }
00431 
00432         <span class="comment">// close serial port connections</span>
00433         <a class="code" href="classikayaki_1_1squid_1_1_serial_i_o.html">SerialIO</a>.closeAllPorts();
00434 
00435         <span class="comment">// all preparations successful, exit the program</span>
00436         System.exit(0);
00437     }
00438 
<a name="l00445"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a7">00445</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> loadProject(File file) {
00446         <span class="keywordflow">if</span> (file == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00447             <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException();
00448         }
00449         <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a> = <a class="code" href="classikayaki_1_1_project.html">Project</a>.loadProject(file);
00450         <span class="keywordflow">if</span> (project != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00451             setProject(project);
00452         } <span class="keywordflow">else</span> {
00453             JOptionPane.showMessageDialog(getParentFrame(),
00454                     <span class="stringliteral">"Unable to open the file "</span> + file,
00455                     <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00456         }
00457     }
00458 
<a name="l00466"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a8">00466</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> createProject(File file, <a class="code" href="classikayaki_1_1_project.html">Project</a>.Type type) {
00467         <span class="keywordflow">if</span> (file == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> || type == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00468             <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException();
00469         }
00470         <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a> = <a class="code" href="classikayaki_1_1_project.html">Project</a>.createProject(file, type);
00471         <span class="keywordflow">if</span> (project != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00472             setProject(project);
00473         } <span class="keywordflow">else</span> {
00474             JOptionPane.showMessageDialog(getParentFrame(),
00475                     <span class="stringliteral">"Unable to create the file "</span> + file,
00476                     <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00477         }
00478     }
00479 
<a name="l00489"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a9">00489</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> exportProject(<a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>, String type, File output) {
00490         <span class="keywordflow">if</span> (project == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00491             <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException();
00492         }
00493         type = type.toLowerCase();
00494         JFileChooser chooser = <span class="keyword">new</span> JFileChooser(<a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getLastDirectory());
00495         chooser.setFileFilter(<span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_generic_file_filter.html">GenericFileFilter</a>(type.toUpperCase() + <span class="stringliteral">" File"</span>, type));
00496 
00497         <span class="keywordflow">do</span> {
00498             <span class="comment">// open a file dialog (or emulate it, if an output file has been specified)</span>
00499             <span class="keywordtype">int</span> returnVal;
00500             <span class="keywordflow">if</span> (output == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00501                 returnVal = chooser.showSaveDialog(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html">MainViewPanel</a>.this);
00502             } <span class="keywordflow">else</span> {
00503                 chooser.setSelectedFile(output);
00504                 returnVal = JFileChooser.APPROVE_OPTION;
00505                 output = <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00506             }
00507 
00508             <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION) {
00509                 File file = chooser.getSelectedFile();
00510 
00511                 <span class="keywordflow">if</span> (!file.getName().toLowerCase().endsWith(<span class="stringliteral">"."</span> + type)) {
00512                     file = <span class="keyword">new</span> File(file.getAbsolutePath() + <span class="stringliteral">"."</span> + type);
00513                 }
00514 
00515                 <span class="comment">// overwrite old file?</span>
00516                 <span class="keywordflow">if</span> (file.exists()) {
00517                     returnVal = JOptionPane.showConfirmDialog(getParentFrame(),
00518                             <span class="stringliteral">"Overwrite the file "</span> + file + <span class="stringliteral">"?"</span>,
00519                             <span class="stringliteral">"Confirm"</span>, JOptionPane.YES_NO_CANCEL_OPTION);
00520                     <span class="keywordflow">if</span> (returnVal == JOptionPane.NO_OPTION) {
00521                         <span class="keywordflow">continue</span>; <span class="comment">// retry</span>
00522                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (returnVal == JOptionPane.CANCEL_OPTION) {
00523                         <span class="keywordflow">break</span>; <span class="comment">// cancel</span>
00524                     }
00525                 }
00526 
00527                 <span class="comment">// write new file</span>
00528                 <span class="keywordtype">boolean</span> ok;
00529                 <span class="keywordflow">if</span> (type.equals(<span class="stringliteral">"dat"</span>)) {
00530                     ok = project.<a class="code" href="classikayaki_1_1_project.html#a4">exportToDAT</a>(chooser.getSelectedFile());
00531                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type.equals(<span class="stringliteral">"tdt"</span>)) {
00532                     ok = project.<a class="code" href="classikayaki_1_1_project.html#a6">exportToTDT</a>(chooser.getSelectedFile());
00533                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type.equals(<span class="stringliteral">"srm"</span>)) {
00534                     ok = project.<a class="code" href="classikayaki_1_1_project.html#a5">exportToSRM</a>(chooser.getSelectedFile());
00535                 } <span class="keywordflow">else</span> {
00536                     <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">"Unkown export type: "</span> + type);
00537                 }
00538                 <span class="keywordflow">if</span> (!ok) {
00539                     JOptionPane.showMessageDialog(getParentFrame(),
00540                             <span class="stringliteral">"Unable to write the file "</span> + file,
00541                             <span class="stringliteral">"Error"</span>, JOptionPane.ERROR_MESSAGE);
00542                 }
00543             }
00544             <span class="keywordflow">break</span>;
00545         } <span class="keywordflow">while</span> (<span class="keyword">true</span>);
00546     }
00547 
00548     <span class="comment">/* Getters for GUI Components */</span>
00549 
<a name="l00550"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a10">00550</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_main_menu_bar.html">MainMenuBar</a> getMenuBar() {
00551         <span class="keywordflow">if</span> (menuBar == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00552             menuBar = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_main_menu_bar.html">MainMenuBar</a>(<span class="keyword">this</span>);
00553         }
00554         <span class="keywordflow">return</span> menuBar;
00555     }
00556 
<a name="l00557"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a11">00557</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_main_status_bar.html">MainStatusBar</a> getStatusBar() {
00558         <span class="keywordflow">if</span> (statusBar == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00559             statusBar = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_main_status_bar.html">MainStatusBar</a>();
00560         }
00561         <span class="keywordflow">return</span> statusBar;
00562     }
00563 
<a name="l00564"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a12">00564</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_graphs_panel.html">MeasurementGraphsPanel</a> getMeasurementGraphsPanel() {
00565         <span class="keywordflow">if</span> (measurementGraphsPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00566             measurementGraphsPanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_graphs_panel.html">MeasurementGraphsPanel</a>();
00567             measurementGraphsPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Graphs"</span>));
00568         }
00569         <span class="keywordflow">return</span> measurementGraphsPanel;
00570     }
00571 
<a name="l00572"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a13">00572</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_details_panel.html">MeasurementDetailsPanel</a> getMeasurementDetailsPanel() {
00573         <span class="keywordflow">if</span> (measurementDetailsPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00574             measurementDetailsPanel = getMeasurementSequencePanel().getDetailsPanel();
00575             measurementDetailsPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Details"</span>));
00576         }
00577         <span class="keywordflow">return</span> measurementDetailsPanel;
00578     }
00579 
<a name="l00580"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a14">00580</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_controls_panel.html">MeasurementControlsPanel</a> getMeasurementControlsPanel() {
00581         <span class="keywordflow">if</span> (measurementControlsPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00582             measurementControlsPanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_controls_panel.html">MeasurementControlsPanel</a>();
00583             measurementControlsPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Controls"</span>));
00584         }
00585         <span class="keywordflow">return</span> measurementControlsPanel;
00586     }
00587 
<a name="l00588"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a15">00588</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_sequence_panel.html">MeasurementSequencePanel</a> getMeasurementSequencePanel() {
00589         <span class="keywordflow">if</span> (measurementSequencePanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00590             measurementSequencePanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_measurement_sequence_panel.html">MeasurementSequencePanel</a>();
00591             measurementSequencePanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Sequence"</span>));
00592         }
00593         <span class="keywordflow">return</span> measurementSequencePanel;
00594     }
00595 
<a name="l00596"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a16">00596</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_project_information_panel.html">ProjectInformationPanel</a> getProjectInformationPanel() {
00597         <span class="keywordflow">if</span> (projectInformationPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00598             projectInformationPanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_project_information_panel.html">ProjectInformationPanel</a>();
00599             projectInformationPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Project Information"</span>));
00600         }
00601         <span class="keywordflow">return</span> projectInformationPanel;
00602     }
00603 
<a name="l00604"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a17">00604</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_calibration_panel.html">CalibrationPanel</a> getCalibrationPanel() {
00605         <span class="keywordflow">if</span> (calibrationPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00606             calibrationPanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_calibration_panel.html">CalibrationPanel</a>(<span class="keyword">this</span>);
00607             calibrationPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Calibration"</span>));
00608         }
00609         <span class="keywordflow">return</span> calibrationPanel;
00610     }
00611 
<a name="l00612"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a18">00612</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_project_explorer_panel.html">ProjectExplorerPanel</a> getProjectExplorerPanel() {
00613         <span class="keywordflow">if</span> (projectExplorerPanel == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00614             projectExplorerPanel = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_project_explorer_panel.html">ProjectExplorerPanel</a>(<span class="keyword">this</span>, <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a>);
00615             projectExplorerPanel.setBorder(BorderFactory.createTitledBorder(<span class="stringliteral">"Project Explorer"</span>));
00616         }
00617         <span class="keywordflow">return</span> projectExplorerPanel;
00618     }
00619 
00620     <span class="comment">/* Getters for Swing Actions */</span>
00621 
<a name="l00622"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a19">00622</a>     <span class="keyword">public</span> Action getNewProjectAction() {
00623         <span class="keywordflow">if</span> (newProjectAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00624             newProjectAction = <span class="keyword">new</span> AbstractAction() {
00625                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00626                     <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html">NewProjectFileChooser</a> chooser = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html">NewProjectFileChooser</a>(<a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getLastDirectory());
00627                     chooser.setFileFilter(<span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_generic_file_filter.html">GenericFileFilter</a>(<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_DESCRIPTION, <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_TYPE));
00628                     <span class="keywordtype">int</span> returnVal = chooser.showSaveDialog(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html">MainViewPanel</a>.this);
00629 
00630                     <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION) {
00631                         File file = chooser.getSelectedFile();
00632                         <a class="code" href="classikayaki_1_1_project.html">Project</a>.Type type = chooser.<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#a1">getProjectType</a>();
00633 
00634                         <span class="keywordflow">if</span> (!file.getName().toLowerCase().endsWith(<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_TYPE)) {
00635                             file = <span class="keyword">new</span> File(file.getAbsolutePath() + <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_TYPE);
00636                         }
00637                         createProject(file, type);
00638                     }
00639                 }
00640             };
00641             newProjectAction.putValue(Action.NAME, <span class="stringliteral">"New..."</span>);
00642             newProjectAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_N);
00643             newProjectAction.putValue(Action.ACCELERATOR_KEY,
00644                     KeyStroke.getKeyStroke(KeyEvent.VK_N, KeyEvent.CTRL_MASK));
00645         }
00646         <span class="keywordflow">return</span> newProjectAction;
00647     }
00648 
<a name="l00649"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a20">00649</a>     <span class="keyword">public</span> Action getOpenProjectAction() {
00650         <span class="keywordflow">if</span> (openProjectAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00651             openProjectAction = <span class="keyword">new</span> AbstractAction() {
00652                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00653                     JFileChooser chooser = <span class="keyword">new</span> JFileChooser(<a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getLastDirectory());
00654                     chooser.setFileFilter(<span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_generic_file_filter.html">GenericFileFilter</a>(<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_DESCRIPTION, <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_TYPE));
00655                     <span class="keywordtype">int</span> returnVal = chooser.showOpenDialog(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html">MainViewPanel</a>.this);
00656 
00657                     <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION) {
00658                         loadProject(chooser.getSelectedFile());
00659                     }
00660                 }
00661             };
00662             openProjectAction.putValue(Action.NAME, <span class="stringliteral">"Open..."</span>);
00663             openProjectAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_O);
00664             openProjectAction.putValue(Action.ACCELERATOR_KEY,
00665                     KeyStroke.getKeyStroke(KeyEvent.VK_O, KeyEvent.CTRL_MASK));
00666         }
00667         <span class="keywordflow">return</span> openProjectAction;
00668     }
00669 
<a name="l00670"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a21">00670</a>     <span class="keyword">public</span> Action getExportProjectToDATAction() {
00671         <span class="keywordflow">if</span> (exportProjectToDATAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00672             exportProjectToDATAction = <span class="keyword">new</span> AbstractAction() {
00673                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00674                     exportProject(getProject(), <span class="stringliteral">"dat"</span>, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00675                 }
00676             };
00677             exportProjectToDATAction.putValue(Action.NAME, <span class="stringliteral">"DAT File..."</span>);
00678             exportProjectToDATAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_D);
00679         }
00680         <span class="keywordflow">return</span> exportProjectToDATAction;
00681     }
00682 
<a name="l00683"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a22">00683</a>     <span class="keyword">public</span> Action getExportProjectToTDTAction() {
00684         <span class="keywordflow">if</span> (exportProjectToDTDAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00685             exportProjectToDTDAction = <span class="keyword">new</span> AbstractAction() {
00686                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00687                     exportProject(getProject(), <span class="stringliteral">"tdt"</span>, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00688                 }
00689             };
00690             exportProjectToDTDAction.putValue(Action.NAME, <span class="stringliteral">"TDT File..."</span>);
00691             exportProjectToDTDAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_T);
00692         }
00693         <span class="keywordflow">return</span> exportProjectToDTDAction;
00694     }
00695 
<a name="l00696"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a23">00696</a>     <span class="keyword">public</span> Action getExportProjectToSRMAction() {
00697         <span class="keywordflow">if</span> (exportProjectToSRMAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00698             exportProjectToSRMAction = <span class="keyword">new</span> AbstractAction() {
00699                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00700                     exportProject(getProject(), <span class="stringliteral">"srm"</span>, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00701                 }
00702             };
00703             exportProjectToSRMAction.putValue(Action.NAME, <span class="stringliteral">"SRM File..."</span>);
00704             exportProjectToSRMAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_S);
00705 
00706         }
00707         <span class="keywordflow">return</span> exportProjectToSRMAction;
00708     }
00709 
<a name="l00710"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a24">00710</a>     <span class="keyword">public</span> Action getPrintAction() {
00711         <span class="keywordflow">if</span> (printAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00712             printAction = <span class="keyword">new</span> AbstractAction() {
00713                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00714 <span class="comment">//                    PrintPanel printPanel = new PrintPanel(null, getProject());</span>
00715 <span class="comment">//                    ComponentPrinter.printComponent(printPanel.getPrintedDocument(), getProject().getName());</span>
00716                     <span class="comment">// HACK: for some reason printing without preview does not work</span>
00717                     <a class="code" href="classikayaki_1_1gui_1_1_settings_dialog.html">SettingsDialog</a>.showPrintPreview(getParentFrame(), <span class="stringliteral">"Print Preview"</span>, getProject(), <span class="keyword">true</span>);
00718                 }
00719             };
00720             printAction.putValue(Action.NAME, <span class="stringliteral">"Print"</span>);
00721             printAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_P);
00722             printAction.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(KeyEvent.VK_P, KeyEvent.CTRL_MASK));
00723         }
00724         <span class="keywordflow">return</span> printAction;
00725     }
00726 
<a name="l00727"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a25">00727</a>     <span class="keyword">public</span> Action getPrintPreviewAction() {
00728         <span class="keywordflow">if</span> (printPreviewAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00729             printPreviewAction = <span class="keyword">new</span> AbstractAction() {
00730                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00731                     <a class="code" href="classikayaki_1_1gui_1_1_settings_dialog.html">SettingsDialog</a>.showPrintPreview(getParentFrame(), <span class="stringliteral">"Print Preview"</span>, getProject(), <span class="keyword">false</span>);
00732                 }
00733             };
00734             printPreviewAction.putValue(Action.NAME, <span class="stringliteral">"Print Preview"</span>);
00735             printPreviewAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_V);
00736         }
00737         <span class="keywordflow">return</span> printPreviewAction;
00738     }
00739 
00740 
<a name="l00741"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a26">00741</a>     <span class="keyword">public</span> Action getExitAction() {
00742         <span class="keywordflow">if</span> (exitAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00743             exitAction = <span class="keyword">new</span> AbstractAction() {
00744                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00745                     exitProgram();
00746                 }
00747             };
00748             exitAction.putValue(Action.NAME, <span class="stringliteral">"Exit"</span>);
00749             exitAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_X);
00750             exitAction.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(KeyEvent.VK_Q, KeyEvent.CTRL_MASK));
00751         }
00752         <span class="keywordflow">return</span> exitAction;
00753     }
00754 
<a name="l00755"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a27">00755</a>     <span class="keyword">public</span> Action getProgramSettingsAction() {
00756         <span class="keywordflow">if</span> (programSettingsAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00757             programSettingsAction = <span class="keyword">new</span> AbstractAction() {
00758                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00759                     <a class="code" href="classikayaki_1_1gui_1_1_settings_dialog.html">SettingsDialog</a>.showProgramSettingsDialog(getParentFrame(), <span class="stringliteral">"Options"</span>);
00760                     setProject(getProject());   <span class="comment">// sequence columns might have changed</span>
00761                 }
00762             };
00763             programSettingsAction.putValue(Action.NAME, <span class="stringliteral">"Options"</span>);
00764             programSettingsAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_O);
00765         }
00766         <span class="keywordflow">return</span> programSettingsAction;
00767     }
00768 
<a name="l00769"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a28">00769</a>     <span class="keyword">public</span> Action getDeviceSettingsAction() {
00770         <span class="keywordflow">if</span> (deviceSettingsAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00771             deviceSettingsAction = <span class="keyword">new</span> AbstractAction() {
00772                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00773                     <a class="code" href="classikayaki_1_1gui_1_1_settings_dialog.html">SettingsDialog</a>.showDeviceSettingsDialog(getParentFrame(), <span class="stringliteral">"Device Configuration"</span>);
00774                     getMeasurementControlsPanel().measurementUpdated(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);     <span class="comment">// handler positions might have changed</span>
00775                 }
00776             };
00777             deviceSettingsAction.putValue(Action.NAME, <span class="stringliteral">"Device Configuration"</span>);
00778             deviceSettingsAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_C);
00779         }
00780         <span class="keywordflow">return</span> deviceSettingsAction;
00781     }
00782 
<a name="l00783"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a29">00783</a>     <span class="keyword">public</span> Action getHelpAction() {
00784         <span class="keywordflow">if</span> (helpAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00785             helpAction = <span class="keyword">new</span> AbstractAction() {
00786                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent event) {
00787                     <span class="keywordflow">if</span> (!System.getProperty(<span class="stringliteral">"os.name"</span>).startsWith(<span class="stringliteral">"Windows"</span>)) {
00788                         JOptionPane.showMessageDialog(getParentFrame(),
00789                                 <span class="stringliteral">"Open this file in your web browser to view the help pages:\n"</span> + <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.HELP_PAGES);
00790                         <span class="keywordflow">return</span>;
00791                     }
00792 
00793                     <span class="comment">// open the help pages in a web browser</span>
00794                     String[] cmd = {<span class="stringliteral">"cmd"</span>, <span class="stringliteral">"/c"</span>, <span class="stringliteral">"start"</span>, <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.HELP_PAGES};
00795                     <span class="comment">//String[] cmd = {"cmd", "/c", "start", "http://www.cs.helsinki.fi/group/squid/"};</span>
00796                     <span class="comment">//String[] cmd = {"cmd.exe", "/c", "dir"};</span>
00797                     <span class="keywordflow">try</span> {
00798                         Process p = Runtime.getRuntime().exec(cmd);
00799                         BufferedInputStream in = <span class="keyword">new</span> BufferedInputStream(p.getInputStream());
00800 
00801                         <span class="comment">// print what the process writes to stdout</span>
00802                         <span class="keywordtype">int</span> i;
00803                         <span class="keywordflow">while</span> ((i = in.read()) &gt;= 0) {
00804                             System.err.print((<span class="keywordtype">char</span>) i);
00805                         }
00806 
00807                     } <span class="keywordflow">catch</span> (IOException e) {
00808                         e.printStackTrace();
00809                     }
00810                 }
00811             };
00812             helpAction.putValue(Action.NAME, <span class="stringliteral">"Help Topics"</span>);
00813             helpAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_H);
00814             helpAction.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0));
00815         }
00816         <span class="keywordflow">return</span> helpAction;
00817     }
00818 
<a name="l00819"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel.html#a30">00819</a>     <span class="keyword">public</span> Action getAboutAction() {
00820         <span class="keywordflow">if</span> (aboutAction == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00821             aboutAction = <span class="keyword">new</span> AbstractAction() {
00822                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00823                     String message = <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.APP_NAME + <span class="stringliteral">" "</span> + <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.APP_VERSION + <span class="stringliteral">"\n"</span> +
00824                             <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.APP_BUILD + <span class="stringliteral">"\n\n"</span> +
00825                             <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.APP_HOME_PAGE + <span class="stringliteral">"\n\n"</span>;
00826                     <span class="keywordflow">for</span> (String author : <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.AUTHORS) {
00827                         message += author + <span class="stringliteral">"\n"</span>;
00828                     }
00829                     JOptionPane.showMessageDialog(getParentFrame(),
00830                             message, <span class="stringliteral">"About "</span> + <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.APP_NAME, JOptionPane.INFORMATION_MESSAGE,
00831                             <span class="keyword">new</span> ImageIcon(ClassLoader.getSystemResource(<span class="stringliteral">"resources/ikayaki.png"</span>)));
00832                 }
00833             };
00834             aboutAction.putValue(Action.NAME, <span class="stringliteral">"About"</span>);
00835             aboutAction.putValue(Action.MNEMONIC_KEY, KeyEvent.VK_A);
00836         }
00837         <span class="keywordflow">return</span> aboutAction;
00838     }
00839 
<a name="l00845"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html">00845</a>     <span class="keyword">private</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html">NewProjectFileChooser</a> <span class="keyword">extends</span> JFileChooser {
00846 
<a name="l00847"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#r0">00847</a>         <span class="keyword">private</span> JComboBox <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#r0">projectType</a>;
00848 
<a name="l00849"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#a0">00849</a>         <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#a0">NewProjectFileChooser</a>(File currentDirectory) {
00850             super(currentDirectory);
00851             <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#r0">projectType</a> = <span class="keyword">new</span> JComboBox(<a class="code" href="classikayaki_1_1_project.html">Project</a>.Type.values());
00852             <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#r0">projectType</a>.setSelectedItem(<a class="code" href="classikayaki_1_1_project.html">Project</a>.Type.AF);
00853         }
00854 
<a name="l00855"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#b0">00855</a>         <span class="keyword">protected</span> JDialog <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#b0">createDialog</a>(Component parent) <span class="keywordflow">throws</span> HeadlessException {
00856             JDialog dialog = super.createDialog(parent);
00857             Container origCP = dialog.getContentPane();
00858             JPanel newCP = <span class="keyword">new</span> JPanel(<span class="keyword">new</span> BorderLayout(0, 0));
00859 
00860             newCP.add(origCP, <span class="stringliteral">"Center"</span>);
00861             newCP.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#d0">createExtraButtons</a>(), <span class="stringliteral">"South"</span>);
00862             dialog.setContentPane(newCP);
00863 
00864             Dimension d = dialog.getSize();
00865             dialog.setSize((<span class="keywordtype">int</span>) d.getWidth(), (int) d.getHeight() + 70);
00866 
00867             <span class="keywordflow">return</span> dialog;
00868         }
00869 
<a name="l00870"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#d0">00870</a>         <span class="keyword">private</span> Component <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#d0">createExtraButtons</a>() {
00871             Box b = <span class="keyword">new</span> Box(BoxLayout.X_AXIS);
00872             b.setBorder(BorderFactory.createEmptyBorder(0, 12, 11, 11));
00873             b.add(<span class="keyword">new</span> JLabel(<span class="stringliteral">"Type of Project: "</span>));
00874             b.add(<a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#r0">projectType</a>);
00875             <span class="keywordflow">return</span> b;
00876         }
00877 
<a name="l00878"></a><a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#a1">00878</a>         <span class="keyword">public</span> <a class="code" href="classikayaki_1_1_project.html">Project</a>.Type <a class="code" href="classikayaki_1_1gui_1_1_main_view_panel_1_1_new_project_file_chooser.html#a1">getProjectType</a>() {
00879             <span class="keywordflow">return</span> (<a class="code" href="classikayaki_1_1_project.html">Project</a>.Type) projectType.getSelectedItem();
00880         }
00881     }
00882 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed May 4 13:11:04 2005 for Squid by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
