<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Squid: My Documents/squid/src/ikayaki/Settings.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">My Documents</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">squid</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">ikayaki</a></div>
<h1>Settings.java</h1><a href="_settings_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * Settings.java</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2005 Project SQUID, http://www.cs.helsinki.fi/group/squid/</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * This file is part of Ikayaki.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Ikayaki is free software; you can redistribute it and/or modify</span>
00009 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00010 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00011 <span class="comment"> * (at your option) any later version.</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> * Ikayaki is distributed in the hope that it will be useful,</span>
00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
00016 <span class="comment"> * GNU General Public License for more details.</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00019 <span class="comment"> * along with Ikayaki; if not, write to the Free Software</span>
00020 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
00021 <span class="comment"> */</span>
00022 
00023 <span class="keyword">package </span>ikayaki;
00024 
00025 <span class="keyword">import</span> ikayaki.gui.SequenceColumn;
00026 <span class="keyword">import</span> ikayaki.gui.StyledWrapper;
00027 <span class="keyword">import</span> ikayaki.util.DocumentUtilities;
00028 <span class="keyword">import</span> ikayaki.util.LastExecutor;
00029 <span class="keyword">import</span> org.w3c.dom.Document;
00030 <span class="keyword">import</span> org.w3c.dom.Element;
00031 <span class="keyword">import</span> org.w3c.dom.NodeList;
00032 <span class="keyword">import</span> org.xml.sax.SAXException;
00033 
00034 <span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;
00035 <span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;
00036 <span class="keyword">import</span> javax.xml.parsers.ParserConfigurationException;
00037 <span class="keyword">import</span> java.awt.*;
00038 <span class="keyword">import</span> java.io.*;
00039 <span class="keyword">import</span> java.util.*;
00040 <span class="keyword">import</span> java.util.List;
00041 
<a name="l00047"></a><a class="code" href="classikayaki_1_1_settings.html">00047</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1_settings.html">Settings</a> {
00048 
<a name="l00049"></a><a class="code" href="classikayaki_1_1_settings.html#v0">00049</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#v0">DIRECTORY_HISTORY_SIZE</a> = 30;
<a name="l00050"></a><a class="code" href="classikayaki_1_1_settings.html#v1">00050</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#v1">PROJECT_HISTORY_SIZE</a> = 10;
00051 
<a name="l00052"></a><a class="code" href="classikayaki_1_1_settings.html#v2">00052</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a> = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>();
<a name="l00053"></a><a class="code" href="classikayaki_1_1_settings.html#v3">00053</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a> = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>();
<a name="l00054"></a><a class="code" href="classikayaki_1_1_settings.html#v4">00054</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a> = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>();
00055 
<a name="l00059"></a><a class="code" href="classikayaki_1_1_settings.html#v5">00059</a>     <span class="keyword">private</span> <span class="keyword">static</span> Properties <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a> = <span class="keyword">new</span> Properties();
00060 
<a name="l00064"></a><a class="code" href="classikayaki_1_1_settings.html#v6">00064</a>     <span class="keyword">private</span> <span class="keyword">static</span> File <a class="code" href="classikayaki_1_1_settings.html#v6">propertiesFile</a> = <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.PROPERTIES_FILE;
00065 
<a name="l00069"></a><a class="code" href="classikayaki_1_1_settings.html#v7">00069</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#v7">propertiesModified</a> = <span class="keyword">false</span>;
00070 
<a name="l00074"></a><a class="code" href="classikayaki_1_1_settings.html#v8">00074</a>     <span class="keyword">private</span> <span class="keyword">static</span> List&lt;MeasurementSequence&gt; <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a> = <span class="keyword">new</span> ArrayList&lt;MeasurementSequence&gt;();
00075 
<a name="l00079"></a><a class="code" href="classikayaki_1_1_settings.html#v9">00079</a>     <span class="keyword">private</span> <span class="keyword">static</span> File <a class="code" href="classikayaki_1_1_settings.html#v9">sequencesFile</a> = <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.SEQUENCES_FILE;
00080 
<a name="l00084"></a><a class="code" href="classikayaki_1_1_settings.html#v10">00084</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#v10">sequencesModified</a> = <span class="keyword">false</span>;
00085 
<a name="l00089"></a><a class="code" href="classikayaki_1_1_settings.html#v11">00089</a>     <span class="keyword">private</span> <span class="keyword">static</span> List&lt;File&gt; <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a> = <span class="keyword">new</span> LinkedList&lt;File&gt;();
00090 
<a name="l00094"></a><a class="code" href="classikayaki_1_1_settings.html#v12">00094</a>     <span class="keyword">private</span> <span class="keyword">static</span> List&lt;File&gt; <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a> = <span class="keyword">new</span> LinkedList&lt;File&gt;();
00095 
<a name="l00099"></a><a class="code" href="classikayaki_1_1_settings.html#v13">00099</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classikayaki_1_1util_1_1_last_executor.html">LastExecutor</a> <a class="code" href="classikayaki_1_1_settings.html#v13">autosaveQueue</a> = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1util_1_1_last_executor.html">LastExecutor</a>(500, <span class="keyword">true</span>);
00100 
<a name="l00104"></a><a class="code" href="classikayaki_1_1_settings.html#v14">00104</a>     <span class="keyword">private</span> <span class="keyword">static</span> Runnable <a class="code" href="classikayaki_1_1_settings.html#v14">autosaveRunnable</a> = <span class="keyword">new</span> Runnable() {
00105         <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
00106             <a class="code" href="classikayaki_1_1_settings.html#e3">saveNow</a>();
00107         }
00108     };
00109 
00110     <span class="keyword">static</span> {
00111 
00112         <span class="comment">// ensure that the configuration files and directories exist</span>
00113         <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.CALIBRATION_PROJECT_DIR.exists()) {
00114             <span class="keywordflow">if</span> (!<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.CALIBRATION_PROJECT_DIR.mkdir()) {
00115                 System.err.println(<span class="stringliteral">"Unable to create directory: "</span> + <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.CALIBRATION_PROJECT_DIR);
00116             }
00117         }
00118         <span class="keywordflow">if</span> (!Ikayaki.CALIBRATION_PROJECT_DIR.isDirectory()) {
00119             System.err.println(<span class="stringliteral">"No such directory: "</span> + Ikayaki.CALIBRATION_PROJECT_DIR);
00120         }
00121 
00122         <span class="comment">// load saved properties</span>
00123         <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1_settings.html#v6">propertiesFile</a>.exists()) {
00124             <span class="keywordflow">try</span> {
00125                 InputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<a class="code" href="classikayaki_1_1_settings.html#v6">propertiesFile</a>));
00126                 <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.loadFromXML(in);
00127                 in.close();
00128             } <span class="keywordflow">catch</span> (FileNotFoundException e) {
00129                 e.printStackTrace();
00130             } <span class="keywordflow">catch</span> (InvalidPropertiesFormatException e) {
00131                 e.printStackTrace();
00132             } <span class="keywordflow">catch</span> (IOException e) {
00133                 e.printStackTrace();
00134             }
00135         }
00136 
00137         <span class="comment">// load saved sequences</span>
00138         <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1_settings.html#v9">sequencesFile</a>.exists()) {
00139             Document document = <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00140             <span class="keywordflow">try</span> {
00141                 DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
00142                 document = builder.parse(<a class="code" href="classikayaki_1_1_settings.html#v9">sequencesFile</a>);
00143             } <span class="keywordflow">catch</span> (SAXException e) {
00144                 e.printStackTrace();
00145             } <span class="keywordflow">catch</span> (ParserConfigurationException e) {
00146                 e.printStackTrace();
00147             } <span class="keywordflow">catch</span> (IOException e) {
00148                 e.printStackTrace();
00149             }
00150             Element root = document.getDocumentElement();
00151             NodeList sequenceList = root.getElementsByTagName(<span class="stringliteral">"sequence"</span>);
00152             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sequenceList.getLength(); i++) {
00153                 <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.add(<span class="keyword">new</span> MeasurementSequence((Element) sequenceList.item(i)));
00154             }
00155         }
00156 
00157         <span class="comment">// load custom properties</span>
00158         <a class="code" href="classikayaki_1_1_settings.html#h3">loadDirectoryHistory</a>();
00159         <a class="code" href="classikayaki_1_1_settings.html#h4">loadProjectHistory</a>();
00160 
00161         <span class="comment">// set background colors for the styled wrappers</span>
00162         <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a>.opaque = <span class="keyword">true</span>;
00163         <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a>.background = <span class="keyword">new</span> Color(0xFFFFFF);
00164         <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a>.selectedBackground = <span class="keyword">new</span> Color(0xC3D4E8);
00165         <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a>.focusBackground = <span class="keyword">new</span> Color(0xFFFFFF);
00166         <a class="code" href="classikayaki_1_1_settings.html#v2">defaultWrapper</a>.selectedFocusBackground = <span class="keyword">new</span> Color(0xC3D4E8);
00167 
00168         <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a>.opaque = <span class="keyword">true</span>;
00169         <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a>.background = <span class="keyword">new</span> Color(0xEEBAEE);
00170         <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a>.selectedBackground = <span class="keyword">new</span> Color(0xFFCCFF);
00171         <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a>.focusBackground = <span class="keyword">new</span> Color(0xEEBAEE);
00172         <a class="code" href="classikayaki_1_1_settings.html#v3">measuringWrapper</a>.selectedFocusBackground = <span class="keyword">new</span> Color(0xFFCCFF);
00173 
00174         <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a>.opaque = <span class="keyword">true</span>;
00175 <span class="comment">//        doneRecentlyWrapper.background = new Color(0xBAEEBA);</span>
00176 <span class="comment">//        doneRecentlyWrapper.selectedBackground = new Color(0xCCFFCC);</span>
00177 <span class="comment">//        doneRecentlyWrapper.focusBackground = new Color(0xBAEEBA);</span>
00178 <span class="comment">//        doneRecentlyWrapper.selectedFocusBackground = new Color(0xCCFFCC);</span>
00179         <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a>.background = <span class="keyword">new</span> Color(0xE9FFE9);
00180         <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a>.selectedBackground = <span class="keyword">new</span> Color(0xBAEEBA);
00181         <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a>.focusBackground = <span class="keyword">new</span> Color(0xE9FFE9);
00182         <a class="code" href="classikayaki_1_1_settings.html#v4">doneRecentlyWrapper</a>.selectedFocusBackground = <span class="keyword">new</span> Color(0xBAEEBA);
00183     }
00184 
<a name="l00188"></a><a class="code" href="classikayaki_1_1_settings.html#e0">00188</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e0">firePropertiesModified</a>() {
00189         <a class="code" href="classikayaki_1_1_settings.html#v7">propertiesModified</a> = <span class="keyword">true</span>;
00190         <a class="code" href="classikayaki_1_1_settings.html#e2">save</a>();
00191     }
00192 
<a name="l00196"></a><a class="code" href="classikayaki_1_1_settings.html#e1">00196</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e1">fireSequencesModified</a>() {
00197         <a class="code" href="classikayaki_1_1_settings.html#v10">sequencesModified</a> = <span class="keyword">true</span>;
00198         <a class="code" href="classikayaki_1_1_settings.html#e2">save</a>();
00199     }
00200 
<a name="l00205"></a><a class="code" href="classikayaki_1_1_settings.html#e2">00205</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e2">save</a>() {
00206         <a class="code" href="classikayaki_1_1_settings.html#v13">autosaveQueue</a>.<a class="code" href="classikayaki_1_1util_1_1_last_executor.html#a8">execute</a>(<a class="code" href="classikayaki_1_1_settings.html#v14">autosaveRunnable</a>);
00207     }
00208 
<a name="l00214"></a><a class="code" href="classikayaki_1_1_settings.html#e3">00214</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e3">saveNow</a>() {
00215         <span class="keywordtype">boolean</span> ok = <span class="keyword">true</span>;
00216 
00217         <span class="comment">// save properties to file</span>
00218         <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1_settings.html#v7">propertiesModified</a>) {
00219             <span class="keywordflow">try</span> {
00220                 OutputStream out = <span class="keyword">new</span> FileOutputStream(<a class="code" href="classikayaki_1_1_settings.html#v6">propertiesFile</a>);
00221                 <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.storeToXML(out, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00222                 out.close();
00223                 <a class="code" href="classikayaki_1_1_settings.html#v7">propertiesModified</a> = <span class="keyword">false</span>;
00224             } <span class="keywordflow">catch</span> (FileNotFoundException e) {
00225                 e.printStackTrace();
00226                 ok = <span class="keyword">false</span>;
00227             } <span class="keywordflow">catch</span> (IOException e) {
00228                 e.printStackTrace();
00229                 ok = <span class="keyword">false</span>;
00230             }
00231         }
00232 
00233         <span class="comment">// save sequences to file</span>
00234         <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1_settings.html#v10">sequencesModified</a>) {
00235             <span class="keywordflow">try</span> {
00236                 Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
00237                 Element root = document.createElement(<span class="stringliteral">"sequences"</span>);
00238                 <span class="keywordflow">for</span> (<a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> sequence : <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>) {
00239                     root.appendChild(sequence.getElement(document));
00240                 }
00241                 document.appendChild(root);
00242 
00243                 <span class="keywordflow">if</span> (<a class="code" href="classikayaki_1_1util_1_1_document_utilities.html">DocumentUtilities</a>.storeToXML(<a class="code" href="classikayaki_1_1_settings.html#v9">sequencesFile</a>, document)) {
00244                     sequencesModified = <span class="keyword">false</span>;
00245                 } <span class="keywordflow">else</span> {
00246                     ok = <span class="keyword">false</span>;
00247                 }
00248             } <span class="keywordflow">catch</span> (ParserConfigurationException e) {
00249                 e.printStackTrace();
00250                 ok = <span class="keyword">false</span>;
00251             }
00252         }
00253         <span class="keywordflow">return</span> ok;
00254     }
00255 
<a name="l00262"></a><a class="code" href="classikayaki_1_1_settings.html#h0">00262</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(String key) {
00263         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.getProperty(key);
00264     }
00265 
<a name="l00273"></a><a class="code" href="classikayaki_1_1_settings.html#h1">00273</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(String key, String defaultValue) {
00274         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.getProperty(key, defaultValue);
00275     }
00276 
<a name="l00284"></a><a class="code" href="classikayaki_1_1_settings.html#h2">00284</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(String key, String <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00285         <span class="keywordflow">if</span> (value == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00286             <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.remove(key);
00287         } <span class="keywordflow">else</span> {
00288             <a class="code" href="classikayaki_1_1_settings.html#v5">properties</a>.setProperty(key, value);
00289         }
00290         <a class="code" href="classikayaki_1_1_settings.html#e0">firePropertiesModified</a>();
00291     }
00292 
<a name="l00298"></a><a class="code" href="classikayaki_1_1_settings.html#e4">00298</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Object <a class="code" href="classikayaki_1_1_settings.html#e4">getXXX</a>() {
00299         <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00300     }
00301 
<a name="l00307"></a><a class="code" href="classikayaki_1_1_settings.html#e5">00307</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e5">setXXX</a>(Object <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00308         <span class="keywordflow">if</span> (value == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) ; <span class="comment">// just to avoid "value is never used" warnings ;)</span>
00309         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00310     }
00311 
00312     <span class="comment">/* Serial ports */</span>
00313 
<a name="l00314"></a><a class="code" href="classikayaki_1_1_settings.html#e6">00314</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <a class="code" href="classikayaki_1_1_settings.html#e6">getMagnetometerPort</a>() {
00315         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.magnetometer.port"</span>, <span class="stringliteral">""</span>);
00316     }
00317 
<a name="l00318"></a><a class="code" href="classikayaki_1_1_settings.html#e7">00318</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e7">setMagnetometerPort</a>(String <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00319         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.magnetometer.port"</span>, value);
00320         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00321     }
00322 
<a name="l00323"></a><a class="code" href="classikayaki_1_1_settings.html#e8">00323</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <a class="code" href="classikayaki_1_1_settings.html#e8">getHandlerPort</a>() {
00324         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.port"</span>, <span class="stringliteral">""</span>);
00325     }
00326 
<a name="l00327"></a><a class="code" href="classikayaki_1_1_settings.html#e9">00327</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e9">setHandlerPort</a>(String <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00328         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.port"</span>, value);
00329         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00330     }
00331 
<a name="l00332"></a><a class="code" href="classikayaki_1_1_settings.html#e10">00332</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <a class="code" href="classikayaki_1_1_settings.html#e10">getDegausserPort</a>() {
00333         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.degausser.port"</span>, <span class="stringliteral">""</span>);
00334     }
00335 
<a name="l00336"></a><a class="code" href="classikayaki_1_1_settings.html#e11">00336</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e11">setDegausserPort</a>(String <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00337         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.degausser.port"</span>, value);
00338         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00339     }
00340 
00341     <span class="comment">/* Magnetometer */</span>
00342 
<a name="l00343"></a><a class="code" href="classikayaki_1_1_settings.html#e12">00343</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e12">getMagnetometerXAxisCalibration</a>() {
00344         <span class="keywordflow">return</span> Double.parseDouble(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.magnetometer.xaxiscalibration"</span>, <span class="stringliteral">"0.0"</span>));
00345     }
00346 
<a name="l00347"></a><a class="code" href="classikayaki_1_1_settings.html#e13">00347</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e13">setMagnetometerXAxisCalibration</a>(<span class="keywordtype">double</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00348         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.magnetometer.xaxiscalibration"</span>, Double.toString(value));
00349         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00350     }
00351 
<a name="l00352"></a><a class="code" href="classikayaki_1_1_settings.html#e14">00352</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e14">getMagnetometerYAxisCalibration</a>() {
00353         <span class="keywordflow">return</span> Double.parseDouble(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.magnetometer.yaxiscalibration"</span>, <span class="stringliteral">"0.0"</span>));
00354     }
00355 
<a name="l00356"></a><a class="code" href="classikayaki_1_1_settings.html#e15">00356</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e15">setMagnetometerYAxisCalibration</a>(<span class="keywordtype">double</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00357         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.magnetometer.yaxiscalibration"</span>, Double.toString(value));
00358         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00359     }
00360 
<a name="l00361"></a><a class="code" href="classikayaki_1_1_settings.html#e16">00361</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e16">getMagnetometerZAxisCalibration</a>() {
00362         <span class="keywordflow">return</span> Double.parseDouble(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.magnetometer.zaxiscalibration"</span>, <span class="stringliteral">"0.0"</span>));
00363     }
00364 
<a name="l00365"></a><a class="code" href="classikayaki_1_1_settings.html#e17">00365</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e17">setMagnetometerZAxisCalibration</a>(<span class="keywordtype">double</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00366         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.magnetometer.zaxiscalibration"</span>, Double.toString(value));
00367         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00368     }
00369 
00370     <span class="comment">/* Degausser */</span>
00371 
<a name="l00372"></a><a class="code" href="classikayaki_1_1_settings.html#e18">00372</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e18">getDegausserRamp</a>() {
00373         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.degausser.ramp"</span>, <span class="stringliteral">"0"</span>));
00374     }
00375 
<a name="l00376"></a><a class="code" href="classikayaki_1_1_settings.html#e19">00376</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e19">setDegausserRamp</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00377         <span class="keywordflow">if</span> (value == 3 || value == 5 || value == 7 || value == 9) {
00378             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.degausser.ramp"</span>, Integer.toString(value));
00379             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00380         } <span class="keywordflow">else</span> {
00381             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00382         }
00383     }
00384 
<a name="l00385"></a><a class="code" href="classikayaki_1_1_settings.html#e20">00385</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e20">getDegausserDelay</a>() {
00386         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.degausser.delay"</span>, <span class="stringliteral">"0"</span>));
00387     }
00388 
<a name="l00389"></a><a class="code" href="classikayaki_1_1_settings.html#e21">00389</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e21">setDegausserDelay</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00390         <span class="keywordflow">if</span> (value &gt; 0 &amp;&amp; value &lt; 10) {
00391             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.degausser.delay"</span>, Integer.toString(value));
00392             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00393         } <span class="keywordflow">else</span> {
00394             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00395         }
00396     }
00397 
<a name="l00398"></a><a class="code" href="classikayaki_1_1_settings.html#e22">00398</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e22">setDegausserMaximumField</a>(<span class="keywordtype">double</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00399         <span class="keywordflow">if</span> (value &gt;= 0.0 &amp;&amp; value &lt;= 300.0) {
00400             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.degausser.maximumfield"</span>, Double.toString(value));
00401             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00402         } <span class="keywordflow">else</span> {
00403             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00404         }
00405     }
00406 
<a name="l00407"></a><a class="code" href="classikayaki_1_1_settings.html#e23">00407</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e23">getDegausserMaximumField</a>() {
00408         <span class="keywordflow">return</span> Double.parseDouble(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.degausser.maximumfield"</span>, <span class="stringliteral">"0.0"</span>));
00409     }
00410 
<a name="l00411"></a><a class="code" href="classikayaki_1_1_settings.html#e24">00411</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e24">getDegausserMinimumField</a>() {
00412         <span class="keywordflow">return</span> 1.1;
00413     }
00414 
<a name="l00415"></a><a class="code" href="classikayaki_1_1_settings.html#e25">00415</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">double</span> <a class="code" href="classikayaki_1_1_settings.html#e25">getDegausserMinimumFieldIncrement</a>() {
00416         <span class="keywordflow">return</span> 0.1;
00417     }
00418 
00419     <span class="comment">/* Sample handler */</span>
00420 
<a name="l00421"></a><a class="code" href="classikayaki_1_1_settings.html#e26">00421</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e26">getHandlerAcceleration</a>() {
00422         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.acceleration"</span>, <span class="stringliteral">"0"</span>));
00423     }
00424 
<a name="l00425"></a><a class="code" href="classikayaki_1_1_settings.html#e27">00425</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e27">setHandlerAcceleration</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00426         <span class="keywordflow">if</span> (value &gt;= 0 &amp;&amp; value &lt;= 127) {
00427             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.acceleration"</span>, Integer.toString(value));
00428             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00429         } <span class="keywordflow">else</span> {
00430             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00431         }
00432     }
00433 
<a name="l00434"></a><a class="code" href="classikayaki_1_1_settings.html#e28">00434</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e28">getHandlerDeceleration</a>() {
00435         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.deceleration"</span>, <span class="stringliteral">"0"</span>));
00436     }
00437 
<a name="l00438"></a><a class="code" href="classikayaki_1_1_settings.html#e29">00438</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e29">setHandlerDeceleration</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00439         <span class="keywordflow">if</span> (value &gt;= 0 &amp;&amp; value &lt;= 127) {
00440             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.deceleration"</span>, Integer.toString(value));
00441             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00442         } <span class="keywordflow">else</span> {
00443             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00444         }
00445     }
00446 
<a name="l00447"></a><a class="code" href="classikayaki_1_1_settings.html#e30">00447</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e30">getHandlerVelocity</a>() {
00448         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.velocity"</span>, <span class="stringliteral">"0"</span>));
00449     }
00450 
<a name="l00451"></a><a class="code" href="classikayaki_1_1_settings.html#e31">00451</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e31">setHandlerVelocity</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00452         <span class="keywordflow">if</span> (value &gt;= 50 &amp;&amp; value &lt;= 8500) {
00453             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.velocity"</span>, Integer.toString(value));
00454             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00455         } <span class="keywordflow">else</span> {
00456             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00457         }
00458     }
00459 
<a name="l00460"></a><a class="code" href="classikayaki_1_1_settings.html#e32">00460</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e32">getHandlerMeasurementVelocity</a>() {
00461         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.measurementvelocity"</span>, <span class="stringliteral">"0"</span>));
00462     }
00463 
<a name="l00464"></a><a class="code" href="classikayaki_1_1_settings.html#e33">00464</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e33">setHandlerMeasurementVelocity</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00465         <span class="keywordflow">if</span> (value &gt;= 50 &amp;&amp; value &lt;= 8500) {
00466             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.measurementvelocity"</span>, Integer.toString(value));
00467             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00468         } <span class="keywordflow">else</span> {
00469             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00470         }
00471     }
00472 
<a name="l00473"></a><a class="code" href="classikayaki_1_1_settings.html#e34">00473</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e34">getHandlerRotationVelocity</a>() {
00474         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.rotationvelocity"</span>, <span class="stringliteral">"50"</span>));
00475     }
00476 
<a name="l00477"></a><a class="code" href="classikayaki_1_1_settings.html#e35">00477</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e35">setHandlerRotationVelocity</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00478         <span class="keywordflow">if</span> (value &gt;= 50 &amp;&amp; value &lt;= 8500) {
00479             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.rotationvelocity"</span>, Integer.toString(value));
00480             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00481         } <span class="keywordflow">else</span> {
00482             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00483         }
00484     }
00485 
<a name="l00486"></a><a class="code" href="classikayaki_1_1_settings.html#e36">00486</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e36">getHandlerRotationAcceleration</a>() {
00487         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.rotationacceleration"</span>, <span class="stringliteral">"0"</span>));
00488     }
00489 
<a name="l00490"></a><a class="code" href="classikayaki_1_1_settings.html#e37">00490</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e37">setHandlerRotationAcceleration</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00491         <span class="keywordflow">if</span> (value &gt;= 0 &amp;&amp; value &lt;= 127) {
00492             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.rotationacceleration"</span>, Integer.toString(value));
00493             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00494         } <span class="keywordflow">else</span> {
00495             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00496         }
00497     }
00498 
<a name="l00499"></a><a class="code" href="classikayaki_1_1_settings.html#e38">00499</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e38">getHandlerRotationDeceleration</a>() {
00500         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.rotationdeceleration"</span>, <span class="stringliteral">"0"</span>));
00501     }
00502 
<a name="l00503"></a><a class="code" href="classikayaki_1_1_settings.html#e39">00503</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e39">setHandlerRotationDeceleration</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00504         <span class="keywordflow">if</span> (value &gt;= 50 &amp;&amp; value &lt;= 2000) {
00505             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.rotationdeceleration"</span>, Integer.toString(value));
00506             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00507         } <span class="keywordflow">else</span> {
00508             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00509         }
00510     }
00511 
<a name="l00512"></a><a class="code" href="classikayaki_1_1_settings.html#e40">00512</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e40">getHandlerTransverseYAFPosition</a>() {
00513         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.transverseyaf"</span>, <span class="stringliteral">"0"</span>));
00514     }
00515 
<a name="l00516"></a><a class="code" href="classikayaki_1_1_settings.html#e41">00516</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e41">setHandlerTransverseYAFPosition</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00517         <span class="keywordflow">if</span> (value &gt;= 1 &amp;&amp; value &lt;= 16777215) {
00518             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.transverseyaf"</span>, Integer.toString(value));
00519             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00520         } <span class="keywordflow">else</span> {
00521             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00522         }
00523     }
00524 
<a name="l00525"></a><a class="code" href="classikayaki_1_1_settings.html#e42">00525</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e42">getHandlerAxialAFPosition</a>() {
00526         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.axialaf"</span>, <span class="stringliteral">"0"</span>));
00527     }
00528 
<a name="l00529"></a><a class="code" href="classikayaki_1_1_settings.html#e43">00529</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e43">setHandlerAxialAFPosition</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00530         <span class="keywordflow">if</span> (value &gt;= 1 &amp;&amp; value &lt;= 16777215) {
00531             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.axialaf"</span>, Integer.toString(value));
00532             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00533         } <span class="keywordflow">else</span> {
00534             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00535         }
00536     }
00537 
<a name="l00538"></a><a class="code" href="classikayaki_1_1_settings.html#e44">00538</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e44">getHandlerSampleLoadPosition</a>() {
00539         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.sampleload"</span>, <span class="stringliteral">"0"</span>));
00540     }
00541 
<a name="l00542"></a><a class="code" href="classikayaki_1_1_settings.html#e45">00542</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e45">setHandlerSampleLoadPosition</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00543         <span class="keywordflow">if</span> (value &gt;= 0 &amp;&amp; value &lt;= 16777215) {
00544             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.sampleload"</span>, Integer.toString(value));
00545             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00546         } <span class="keywordflow">else</span> {
00547             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00548         }
00549     }
00550 
<a name="l00551"></a><a class="code" href="classikayaki_1_1_settings.html#e46">00551</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e46">getHandlerBackgroundPosition</a>() {
00552         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.background"</span>, <span class="stringliteral">"0"</span>));
00553     }
00554 
<a name="l00555"></a><a class="code" href="classikayaki_1_1_settings.html#e47">00555</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e47">setHandlerBackgroundPosition</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00556         <span class="keywordflow">if</span> (value &gt;= 1 &amp;&amp; value &lt;= 16777215) {
00557             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.background"</span>, Integer.toString(value));
00558             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00559         } <span class="keywordflow">else</span> {
00560             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00561         }
00562     }
00563 
<a name="l00564"></a><a class="code" href="classikayaki_1_1_settings.html#e48">00564</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e48">getHandlerMeasurementPosition</a>() {
00565         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.measurement"</span>, <span class="stringliteral">"0"</span>));
00566     }
00567 
<a name="l00568"></a><a class="code" href="classikayaki_1_1_settings.html#e49">00568</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e49">setHandlerMeasurementPosition</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00569         <span class="keywordflow">if</span> (value &gt;= 1 &amp;&amp; value &lt;= 16777215) {
00570             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.measurement"</span>, Integer.toString(value));
00571             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00572         } <span class="keywordflow">else</span> {
00573             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00574         }
00575     }
00576 
<a name="l00577"></a><a class="code" href="classikayaki_1_1_settings.html#e50">00577</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e50">getHandlerRightLimit</a>() {
00578         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.pos.rightlimit"</span>, <span class="stringliteral">"0"</span>));
00579     }
00580 
<a name="l00581"></a><a class="code" href="classikayaki_1_1_settings.html#e51">00581</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e51">setHandlerRightLimit</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00582         <span class="keywordflow">if</span> (value == 0 || value == 1) {
00583             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.pos.rightlimit"</span>, Integer.toString(value));
00584             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00585         } <span class="keywordflow">else</span> {
00586             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00587         }
00588     }
00589 
<a name="l00590"></a><a class="code" href="classikayaki_1_1_settings.html#e52">00590</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e52">getHandlerRotation</a>() {
00591         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"squid.handler.rotation"</span>, <span class="stringliteral">"0"</span>));
00592     }
00593 
<a name="l00594"></a><a class="code" href="classikayaki_1_1_settings.html#e53">00594</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e53">setHandlerRotation</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00595         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"squid.handler.rotation"</span>, Integer.toString(value));
00596         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00597     }
00598 
00599     <span class="comment">/* Other settings for measurements */</span>
00600 
<a name="l00604"></a><a class="code" href="classikayaki_1_1_settings.html#e54">00604</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e54">getMeasurementRotations</a>() {
00605         <span class="keywordflow">return</span> Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"measurement.rotations"</span>, <span class="stringliteral">"1"</span>));
00606     }
00607 
<a name="l00608"></a><a class="code" href="classikayaki_1_1_settings.html#e55">00608</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e55">setMeasurementRotations</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00609         <span class="keywordflow">if</span> (value &gt;= 0) {
00610             <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"measurement.rotations"</span>, Integer.toString(value));
00611             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00612         } <span class="keywordflow">else</span> {
00613             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00614         }
00615     }
00616 
00617     <span class="comment">/* Program window */</span>
00618 
<a name="l00619"></a><a class="code" href="classikayaki_1_1_settings.html#e56">00619</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e56">getWindowWidth</a>() {
00620         <span class="keywordtype">int</span> i = Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"gui.window.width"</span>, <span class="stringliteral">"1000"</span>));
00621         Rectangle maxBounds = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();
00622         <span class="keywordflow">if</span> (i &lt; 400) {
00623             i = 400;
00624         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt; maxBounds.width) {
00625             i = maxBounds.width;
00626         }
00627         <span class="keywordflow">return</span> i;
00628     }
00629 
<a name="l00630"></a><a class="code" href="classikayaki_1_1_settings.html#e57">00630</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e57">setWindowWidth</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00631         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"gui.window.width"</span>, Integer.toString(value));
00632         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00633     }
00634 
<a name="l00635"></a><a class="code" href="classikayaki_1_1_settings.html#e58">00635</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1_settings.html#e58">getWindowHeight</a>() {
00636         <span class="keywordtype">int</span> i = Integer.parseInt(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"gui.window.height"</span>, <span class="stringliteral">"700"</span>));
00637         Rectangle maxBounds = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();
00638         <span class="keywordflow">if</span> (i &lt; 300) {
00639             i = 300;
00640         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt; maxBounds.height) {
00641             i = maxBounds.height;
00642         }
00643         <span class="keywordflow">return</span> i;
00644     }
00645 
<a name="l00646"></a><a class="code" href="classikayaki_1_1_settings.html#e59">00646</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e59">setWindowHeight</a>(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00647         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"gui.window.height"</span>, Integer.toString(value));
00648         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00649     }
00650 
<a name="l00651"></a><a class="code" href="classikayaki_1_1_settings.html#e60">00651</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e60">getWindowMaximized</a>() {
00652         <span class="keywordflow">return</span> Boolean.parseBoolean(<a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"gui.window.maximized"</span>, <span class="stringliteral">"false"</span>));
00653     }
00654 
<a name="l00655"></a><a class="code" href="classikayaki_1_1_settings.html#e61">00655</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e61">setWindowMaximized</a>(<span class="keywordtype">boolean</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>) {
00656         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"gui.window.maximized"</span>, Boolean.toString(value));
00657         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00658     }
00659 
00660     <span class="comment">/* Directory history */</span>
00661 
<a name="l00662"></a><a class="code" href="classikayaki_1_1_settings.html#e62">00662</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> File <a class="code" href="classikayaki_1_1_settings.html#e62">getLastDirectory</a>() {
00663         File[] dirs = <a class="code" href="classikayaki_1_1_settings.html#e63">getDirectoryHistory</a>();
00664         <span class="keywordflow">if</span> (dirs.length &gt; 0) {
00665             <span class="keywordflow">return</span> dirs[0];
00666         } <span class="keywordflow">else</span> {
00667             <span class="keywordflow">return</span> <span class="keyword">new</span> File(<span class="stringliteral">""</span>).getAbsoluteFile();
00668         }
00669     }
00670 
<a name="l00671"></a><a class="code" href="classikayaki_1_1_settings.html#e63">00671</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> File[] <a class="code" href="classikayaki_1_1_settings.html#e63">getDirectoryHistory</a>() {
00672         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.toArray(<span class="keyword">new</span> File[<a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.size()]);
00673     }
00674 
<a name="l00675"></a><a class="code" href="classikayaki_1_1_settings.html#e64">00675</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e64">updateDirectoryHistory</a>(File visited) {
00676         <span class="keywordflow">if</span> (!visited.isAbsolute()) {
00677             visited = visited.getAbsoluteFile();
00678         }
00679 
00680         <span class="comment">// update history list</span>
00681         <span class="keywordflow">while</span> (<a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.remove(visited)) ;
00682         <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.add(0, visited);
00683         <span class="keywordflow">while</span> (<a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.size() &gt; <a class="code" href="classikayaki_1_1_settings.html#v0">DIRECTORY_HISTORY_SIZE</a>) {
00684             <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.remove(<a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.size() - 1);
00685         }
00686 
00687         <span class="comment">// save as properties</span>
00688         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Math.max(<a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.size(), <a class="code" href="classikayaki_1_1_settings.html#v0">DIRECTORY_HISTORY_SIZE</a>); i++) {
00689             <span class="keywordflow">if</span> (i &lt; <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.size()) {
00690                 <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"history.dir."</span> + i, <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.get(i).getAbsolutePath());
00691             } <span class="keywordflow">else</span> {
00692                 <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"history.dir."</span> + i, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00693             }
00694         }
00695         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00696     }
00697 
<a name="l00698"></a><a class="code" href="classikayaki_1_1_settings.html#h3">00698</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#h3">loadDirectoryHistory</a>() {
00699         <span class="comment">// reset history list</span>
00700         <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.clear();
00701 
00702         <span class="comment">// load from properties</span>
00703         <span class="keywordtype">int</span> i = 0;
00704         <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
00705             String s = <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"history.dir."</span> + i);
00706             <span class="keywordflow">if</span> (s == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00707                 <span class="keywordflow">break</span>;
00708             } <span class="keywordflow">else</span> {
00709                 File file = <span class="keyword">new</span> File(s);
00710                 <span class="keywordflow">if</span> (file.isDirectory()) {
00711                     <a class="code" href="classikayaki_1_1_settings.html#v11">directoryHistory</a>.add(file);
00712                 }
00713             }
00714             i++;
00715         }
00716     }
00717 
00718     <span class="comment">/* Project history */</span>
00719 
<a name="l00720"></a><a class="code" href="classikayaki_1_1_settings.html#e65">00720</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> File[] <a class="code" href="classikayaki_1_1_settings.html#e65">getProjectHistory</a>() {
00721         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.toArray(<span class="keyword">new</span> File[<a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.size()]);
00722     }
00723 
<a name="l00724"></a><a class="code" href="classikayaki_1_1_settings.html#e66">00724</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">boolean</span> <a class="code" href="classikayaki_1_1_settings.html#e66">updateProjectHistory</a>(File visited) {
00725         <span class="keywordflow">if</span> (visited == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00726             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00727         }
00728         <span class="keywordflow">if</span> (!visited.isAbsolute()) {
00729             visited = visited.getAbsoluteFile();
00730         }
00731 
00732         <span class="comment">// update history list</span>
00733         <span class="keywordflow">while</span> (<a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.remove(visited)) ;
00734         <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.add(0, visited);
00735         <span class="keywordflow">while</span> (<a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.size() &gt; <a class="code" href="classikayaki_1_1_settings.html#v1">PROJECT_HISTORY_SIZE</a>) {
00736             <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.remove(<a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.size() - 1);
00737         }
00738 
00739         <span class="comment">// save as properties</span>
00740         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Math.max(<a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.size(), <a class="code" href="classikayaki_1_1_settings.html#v1">PROJECT_HISTORY_SIZE</a>); i++) {
00741             <span class="keywordflow">if</span> (i &lt; <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.size()) {
00742                 <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"history.project."</span> + i, <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.get(i).getAbsolutePath());
00743             } <span class="keywordflow">else</span> {
00744                 <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"history.project."</span> + i, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00745             }
00746         }
00747         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00748     }
00749 
<a name="l00750"></a><a class="code" href="classikayaki_1_1_settings.html#h4">00750</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#h4">loadProjectHistory</a>() {
00751         <span class="comment">// reset history list</span>
00752         <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.clear();
00753 
00754         <span class="comment">// load from properties</span>
00755         <span class="keywordtype">int</span> i = 0;
00756         <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
00757             String s = <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"history.project."</span> + i);
00758             <span class="keywordflow">if</span> (s == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00759                 <span class="keywordflow">break</span>;
00760             } <span class="keywordflow">else</span> {
00761                 File file = <span class="keyword">new</span> File(s);
00762                 <span class="keywordflow">if</span> (file.isFile()) {
00763                     <a class="code" href="classikayaki_1_1_settings.html#v12">projectHistory</a>.add(file);
00764                 }
00765             }
00766             i++;
00767         }
00768     }
00769 
00770     <span class="comment">/* Saves sequences */</span>
00771 
<a name="l00775"></a><a class="code" href="classikayaki_1_1_settings.html#e67">00775</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a>[] <a class="code" href="classikayaki_1_1_settings.html#e67">getSequences</a>() {
00776         <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a>[] s = <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.toArray(<span class="keyword">new</span> <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a>[<a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.size()]);
00777         Arrays.sort(s);
00778         <span class="keywordflow">return</span> s;
00779     }
00780 
<a name="l00784"></a><a class="code" href="classikayaki_1_1_settings.html#e68">00784</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e68">addSequence</a>(<a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> sequence) {
00785         <span class="keywordflow">if</span> (sequence != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> &amp;&amp; !<a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.contains(sequence)) {
00786             <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.add(sequence);
00787             <a class="code" href="classikayaki_1_1_settings.html#e1">fireSequencesModified</a>();
00788         }
00789     }
00790 
<a name="l00794"></a><a class="code" href="classikayaki_1_1_settings.html#e69">00794</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e69">removeSequence</a>(<a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> sequence) {
00795         <span class="keywordflow">if</span> (sequence != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00796             <a class="code" href="classikayaki_1_1_settings.html#v8">sequences</a>.remove(sequence);
00797             <a class="code" href="classikayaki_1_1_settings.html#e1">fireSequencesModified</a>();
00798         }
00799     }
00800 
00801     <span class="comment">/* Sequence table settings */</span>
00802 
<a name="l00803"></a><a class="code" href="classikayaki_1_1_settings.html#e70">00803</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> List&lt;SequenceColumn&gt; <a class="code" href="classikayaki_1_1_settings.html#e70">getDefaultColumns</a>() {
00804         String s = <a class="code" href="classikayaki_1_1_settings.html#h0">getProperty</a>(<span class="stringliteral">"sequence.defaultcolumns"</span>,
00805                 <span class="stringliteral">"COUNT,STEP,DECLINATION,INCLINATION,RELATIVE_MAGNETIZATION,SAMPLE_X,SAMPLE_Y,SAMPLE_Z,THETA63"</span>);
00806         String[] columnNames = s.split(<span class="stringliteral">","</span>);
00807         List&lt;SequenceColumn&gt; columns = <span class="keyword">new</span> ArrayList&lt;SequenceColumn&gt;(columnNames.length);
00808         <span class="keywordflow">for</span> (String name : columnNames) {
00809             <span class="keywordflow">try</span> {
00810                 columns.add(<a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a>.valueOf(name));
00811             } <span class="keywordflow">catch</span> (IllegalArgumentException e) {
00812                 e.printStackTrace();
00813             }
00814         }
00815         <span class="keywordflow">return</span> columns;
00816     }
00817 
<a name="l00818"></a><a class="code" href="classikayaki_1_1_settings.html#e71">00818</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1_settings.html#e71">setDefaultColumn</a>(<a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a> column, <span class="keywordtype">boolean</span> enabled) {
00819         <span class="keywordflow">if</span> (column == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00820             <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException();
00821         }
00822         List&lt;SequenceColumn&gt; columns = <a class="code" href="classikayaki_1_1_settings.html#e70">getDefaultColumns</a>();
00823         columns.remove(column);
00824         <span class="keywordflow">if</span> (enabled) {
00825             columns.add(column);
00826         }
00827 
00828         String s = <span class="stringliteral">""</span>;
00829         <span class="keywordflow">for</span> (<a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a> c : columns) {
00830             <span class="keywordflow">if</span> (s.length() &gt; 0) {
00831                 s += <span class="stringliteral">","</span>;
00832             }
00833             s += c.name();
00834         }
00835         <a class="code" href="classikayaki_1_1_settings.html#h2">setProperty</a>(<span class="stringliteral">"sequence.defaultcolumns"</span>, s);
00836     }
00837 
00838     <span class="comment">/* Calibration projects */</span>
00839 
<a name="l00840"></a><a class="code" href="classikayaki_1_1_settings.html#e72">00840</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> File[] <a class="code" href="classikayaki_1_1_settings.html#e72">getCalibrationProjectFiles</a>() {
00841         File[] files = <a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.CALIBRATION_PROJECT_DIR.listFiles(<span class="keyword">new</span> FileFilter() {
00842             <span class="keyword">public</span> <span class="keywordtype">boolean</span> accept(File file) {
00843                 <span class="keywordflow">return</span> file.isFile()
00844                         &amp;&amp; file.getName().endsWith(<a class="code" href="classikayaki_1_1_ikayaki.html">Ikayaki</a>.FILE_TYPE)
00845                         &amp;&amp; <a class="code" href="classikayaki_1_1_project.html">Project</a>.getType(file) == <a class="code" href="classikayaki_1_1_project.html">Project</a>.Type.CALIBRATION;
00846             }
00847         });
00848         <span class="keywordflow">if</span> (files == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00849             <span class="keywordflow">return</span> <span class="keyword">new</span> File[0];
00850         } <span class="keywordflow">else</span> {
00851             Arrays.sort(files);
00852             <span class="keywordflow">return</span> files;
00853         }
00854     }
00855 
<a name="l00856"></a><a class="code" href="classikayaki_1_1_settings.html#e73">00856</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> File getHolderCalibrationFile() {
00857         String s = getProperty(<span class="stringliteral">"calibration.holder"</span>);
00858         <span class="keywordflow">if</span> (s == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00859             <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00860         }
00861         <span class="keywordflow">return</span> <span class="keyword">new</span> File(s).getAbsoluteFile();
00862     }
00863 
<a name="l00864"></a><a class="code" href="classikayaki_1_1_settings.html#e74">00864</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keywordtype">void</span> setHolderCalibrationFile(File file) {
00865         <span class="keywordflow">if</span> (file == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00866             setProperty(<span class="stringliteral">"calibration.holder"</span>, <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00867             <span class="keywordflow">return</span>;
00868         }
00869         <span class="keywordflow">if</span> (!file.exists()) {
00870             <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">"Does not exist: "</span> + file);
00871         }
00872         File[] files = getCalibrationProjectFiles();
00873         <span class="keywordflow">for</span> (File f : files) {
00874             <span class="keywordflow">if</span> (f.equals(file)) {
00875                 setProperty(<span class="stringliteral">"calibration.holder"</span>, file.getAbsolutePath());
00876                 <span class="keywordflow">return</span>;
00877             }
00878         }
00879         <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">"Not a calibration project: "</span> + file);
00880     }
00881 
<a name="l00882"></a><a class="code" href="classikayaki_1_1_settings.html#e75">00882</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <a class="code" href="classikayaki_1_1_measurement_result.html">MeasurementResult</a> getHolderCalibration() {
00883         File file = getHolderCalibrationFile();
00884         <span class="keywordflow">if</span> (file == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00885             <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00886         }
00887         <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="namespaceikayaki_1_1gui.html#a26a1">project</a> = <a class="code" href="classikayaki_1_1_project.html">Project</a>.loadProject(file);
00888         <span class="keywordflow">if</span> (project == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> || !project.<a class="code" href="classikayaki_1_1_project.html#a9">isHolderCalibration</a>()) {
00889             <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00890         }
00891 
00892         <span class="keywordtype">int</span> index = project.<a class="code" href="classikayaki_1_1_project.html#a47">getCompletedSteps</a>() - 1;
00893         <span class="keywordflow">if</span> (index &lt; 0) {
00894             <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00895         }
00896         Double x = project.<a class="code" href="classikayaki_1_1_project.html#a50">getValue</a>(index, MeasurementValue.SAMPLE_X);
00897         Double y = project.<a class="code" href="classikayaki_1_1_project.html#a50">getValue</a>(index, MeasurementValue.SAMPLE_Y);
00898         Double z = project.<a class="code" href="classikayaki_1_1_project.html#a50">getValue</a>(index, MeasurementValue.SAMPLE_Z);
00899         <span class="keywordflow">if</span> (x == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> || y == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a> || z == <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00900             <span class="keywordflow">return</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00901         }
00902         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classikayaki_1_1_measurement_result.html">MeasurementResult</a>(<a class="code" href="classikayaki_1_1_measurement_result.html">MeasurementResult</a>.Type.HOLDER, 0, x, y, z);
00903     }
00904 
00905     <span class="comment">/* JTable styles */</span>
00906 
<a name="l00910"></a><a class="code" href="classikayaki_1_1_settings.html#e76">00910</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> getDefaultWrapperInstance() {
00911         <span class="keywordflow">return</span> (<a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>) defaultWrapper.clone();
00912     }
00913 
<a name="l00917"></a><a class="code" href="classikayaki_1_1_settings.html#e77">00917</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> getMeasuringWrapperInstance() {
00918         <span class="keywordflow">return</span> (<a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>) measuringWrapper.clone();
00919     }
00920 
<a name="l00924"></a><a class="code" href="classikayaki_1_1_settings.html#e78">00924</a>     <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a> getDoneRecentlyWrapperInstance() {
00925         <span class="keywordflow">return</span> (<a class="code" href="classikayaki_1_1gui_1_1_styled_wrapper.html">StyledWrapper</a>) doneRecentlyWrapper.clone();
00926     }
00927 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed May 4 13:11:05 2005 for Squid by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
