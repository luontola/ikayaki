<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Squid: My Documents/squid/src/ikayaki/gui/ProgramSettingsPanel.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">My Documents</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">squid</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">ikayaki</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">gui</a></div>
<h1>ProgramSettingsPanel.java</h1><a href="_program_settings_panel_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * ProgramSettingsPanel.java</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2005 Project SQUID, http://www.cs.helsinki.fi/group/squid/</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * This file is part of Ikayaki.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Ikayaki is free software; you can redistribute it and/or modify</span>
00009 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00010 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00011 <span class="comment"> * (at your option) any later version.</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> * Ikayaki is distributed in the hope that it will be useful,</span>
00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
00016 <span class="comment"> * GNU General Public License for more details.</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00019 <span class="comment"> * along with Ikayaki; if not, write to the Free Software</span>
00020 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
00021 <span class="comment"> */</span>
00022 
00023 <span class="keyword">package </span>ikayaki.gui;
00024 
00025 <span class="keyword">import</span> com.intellij.uiDesigner.core.GridConstraints;
00026 <span class="keyword">import</span> com.intellij.uiDesigner.core.GridLayoutManager;
00027 <span class="keyword">import</span> com.intellij.uiDesigner.core.Spacer;
00028 <span class="keyword">import</span> ikayaki.Ikayaki;
00029 <span class="keyword">import</span> ikayaki.MeasurementSequence;
00030 <span class="keyword">import</span> ikayaki.Settings;
00031 
00032 <span class="keyword">import</span> javax.swing.*;
00033 <span class="keyword">import</span> javax.swing.event.ListSelectionEvent;
00034 <span class="keyword">import</span> javax.swing.event.ListSelectionListener;
00035 <span class="keyword">import</span> javax.swing.table.AbstractTableModel;
00036 <span class="keyword">import</span> javax.swing.text.DefaultFormatterFactory;
00037 <span class="keyword">import</span> javax.swing.text.NumberFormatter;
00038 <span class="keyword">import</span> java.awt.*;
00039 <span class="keyword">import</span> java.awt.event.*;
00040 <span class="keyword">import</span> java.beans.PropertyChangeEvent;
00041 <span class="keyword">import</span> java.beans.PropertyChangeListener;
00042 <span class="keyword">import</span> java.io.File;
00043 <span class="keyword">import</span> java.util.List;
00044 
<a name="l00050"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html">00050</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html">ProgramSettingsPanel</a> <span class="keyword">extends</span> JPanel {
00051 
<a name="l00052"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r0">00052</a>     <span class="keyword">private</span> JDialog <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r0">creator</a>;
00053 
<a name="l00054"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">00054</a>     <span class="keyword">private</span> JFormattedTextField <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">measurementRotationsField</a>;
<a name="l00055"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r2">00055</a>     <span class="keyword">private</span> JComboBox <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r2">holderCalibrationCombo</a>;
<a name="l00056"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r3">00056</a>     <span class="keyword">private</span> JTable <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r3">sequencesTable</a>;
<a name="l00057"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r4">00057</a>     <span class="keyword">private</span> JButton <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r4">sequencesDeleteButton</a>;
<a name="l00058"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r5">00058</a>     <span class="keyword">private</span> JPanel <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r5">defaultColumnsPane</a>;
<a name="l00059"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r6">00059</a>     <span class="keyword">private</span> JButton <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r6">closeButton</a>;
<a name="l00060"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r7">00060</a>     <span class="keyword">private</span> JPanel <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r7">contentPane</a>;
00061 
<a name="l00062"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#a0">00062</a>     <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#a0">ProgramSettingsPanel</a>(JDialog dialog) {
00063         <span class="keyword">this</span>.creator = dialog;
00064 
00065         $<a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#d0">$$setupUI</a>$$$();
00066         setLayout(<span class="keyword">new</span> BorderLayout());
00067         add(<a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r7">contentPane</a>, BorderLayout.CENTER);
00068 
00069         <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r4">sequencesDeleteButton</a>.setMnemonic(KeyEvent.VK_D);
00070         <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r6">closeButton</a>.setMnemonic(KeyEvent.VK_C);
00071 
00072         <span class="comment">/* Measurement Rotations */</span>
00073 
00074         NumberFormatter format = <span class="keyword">new</span> NumberFormatter();
00075         format.setMinimum(<span class="keyword">new</span> Integer(0));
00076         format.setMaximum(<span class="keyword">new</span> Integer(999));
00077         <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">measurementRotationsField</a>.setFormatterFactory(<span class="keyword">new</span> DefaultFormatterFactory(format));
00078         <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">measurementRotationsField</a>.setValue(<span class="keyword">new</span> Integer(<a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getMeasurementRotations()));
00079 
00080         <span class="comment">// autosaving</span>
00081         <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">measurementRotationsField</a>.addPropertyChangeListener(<span class="stringliteral">"value"</span>, <span class="keyword">new</span> PropertyChangeListener() {
00082             <span class="keyword">public</span> <span class="keywordtype">void</span> propertyChange(PropertyChangeEvent evt) {
00083                 <span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a> = ((Number) <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#r1">measurementRotationsField</a>.getValue()).intValue();
00084                 <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.setMeasurementRotations(<a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a>);
00085             }
00086         });
00087 
00088         <span class="comment">// automatically select all text to make the entering of a new value easy</span>
00089         measurementRotationsField.addFocusListener(<span class="keyword">new</span> FocusListener() {
00090             <span class="keyword">public</span> <span class="keywordtype">void</span> focusGained(FocusEvent e) {
00091                 SwingUtilities.invokeLater(<span class="keyword">new</span> Runnable() {
00092                     <span class="keyword">public</span> <span class="keywordtype">void</span> run() {
00093                         measurementRotationsField.setSelectionStart(0);
00094                         measurementRotationsField.setSelectionEnd(measurementRotationsField.getText().length());
00095                     }
00096                 });
00097             }
00098 
00099             <span class="keyword">public</span> <span class="keywordtype">void</span> focusLost(FocusEvent e) {
00100                 <span class="comment">// DO NOTHING</span>
00101             }
00102         });
00103 
00104         <span class="comment">/* Sample Holder Calibration */</span>
00105 
00106         <span class="keyword">final</span> File[] calibrationFiles = Settings.getCalibrationProjectFiles();
00107         File holderCalibrationFile = Settings.getHolderCalibrationFile();
00108         holderCalibrationCombo.addItem(<span class="stringliteral">""</span>);     <span class="comment">// option for selecting no file</span>
00109 
00110         <span class="comment">// add all calibration projects to the list</span>
00111         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; calibrationFiles.length; i++) {
00112             File file = calibrationFiles[i];
00113             String name = file.getName().substring(0, file.getName().lastIndexOf(Ikayaki.FILE_TYPE));
00114             holderCalibrationCombo.addItem(name);
00115 
00116             <span class="keywordflow">if</span> (file.equals(holderCalibrationFile)) {
00117                 holderCalibrationCombo.setSelectedIndex(holderCalibrationCombo.getItemCount() - 1);
00118             }
00119         }
00120 
00121         <span class="comment">// autosaving</span>
00122         holderCalibrationCombo.addActionListener(<span class="keyword">new</span> ActionListener() {
00123             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00124                 <span class="keywordtype">int</span> index = holderCalibrationCombo.getSelectedIndex();
00125                 index--;
00126                 <span class="keywordflow">if</span> (index &gt;= 0 &amp;&amp; index &lt; calibrationFiles.length) {
00127                     Settings.setHolderCalibrationFile(calibrationFiles[index]);
00128                 } <span class="keywordflow">else</span> {
00129                     Settings.setHolderCalibrationFile(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00130                 }
00131             }
00132         });
00133 
00134         <span class="comment">/* Saved Sequences */</span>
00135 
00136         <span class="keyword">final</span> EditSequencesTableModel tableModel = <span class="keyword">new</span> EditSequencesTableModel();
00137         sequencesTable.setModel(tableModel);
00138         sequencesTable.setTableHeader(<a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>);
00139         sequencesTable.getParent().setBackground(sequencesTable.getBackground());
00140         sequencesTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
00141 
00142         <span class="comment">// deleting of sequences</span>
00143         sequencesDeleteButton.addActionListener(<span class="keyword">new</span> ActionListener() {
00144             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00145                 <span class="keywordtype">int</span> index = sequencesTable.getSelectedRow();
00146                 <span class="keywordflow">if</span> (sequencesTable.isEditing()) {
00147                     <span class="comment">// cancel the editing of the selected cell to avoid renaming the next sequence in the list</span>
00148                     sequencesTable.editCellAt(-1, -1);
00149                 }
00150                 <span class="keywordflow">if</span> (index &gt;= 0) {
00151                     tableModel.deleteSequence(index);
00152                 }
00153             }
00154         });
00155 
00156         <span class="comment">// a sequence must be selected to be able to delete it</span>
00157         sequencesDeleteButton.setEnabled(<span class="keyword">false</span>);
00158         sequencesTable.getSelectionModel().addListSelectionListener(<span class="keyword">new</span> ListSelectionListener() {
00159             <span class="keyword">public</span> <span class="keywordtype">void</span> valueChanged(ListSelectionEvent e) {
00160                 sequencesDeleteButton.setEnabled(sequencesTable.getSelectedRow() &gt;= 0);
00161             }
00162         });
00163 
00164         <span class="comment">/* Default Columns */</span>
00165 
00166         <a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a>[] allColumns = <a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a>.getAllColumns();
00167         List&lt;SequenceColumn&gt; defaultColumns = Settings.getDefaultColumns();
00168 
00169         defaultColumnsPane.setLayout(<span class="keyword">new</span> GridBagLayout());
00170         GridBagConstraints gc = <span class="keyword">new</span> GridBagConstraints();
00171         gc.fill = GridBagConstraints.BOTH;
00172         gc.ipadx = 10;
00173         gc.gridy = 0;
00174 
00175         <span class="comment">// add all columns to the list as checkboxes</span>
00176         <span class="keywordflow">for</span> (<span class="keyword">final</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a> column : allColumns) {
00177             <span class="keyword">final</span> JCheckBox checkBox = <span class="keyword">new</span> JCheckBox(column.getColumnName(null));
00178             JLabel description = <span class="keyword">new</span> JLabel(column.getToolTipText(null));
00179 
00180             <span class="comment">// autosaving</span>
00181             checkBox.addActionListener(<span class="keyword">new</span> ActionListener() {
00182                 <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00183                     Settings.setDefaultColumn(column, checkBox.isSelected());
00184                 }
00185             });
00186             checkBox.setSelected(defaultColumns.contains(column));
00187 
00188             gc.gridx = 0;
00189             defaultColumnsPane.add(checkBox, gc);
00190             gc.gridx = 1;
00191             defaultColumnsPane.add(description, gc);
00192             gc.gridy++;
00193         }
00194 
00195         <span class="comment">/* Close */</span>
00196 
00197         closeButton.addActionListener(<span class="keyword">new</span> ActionListener() {
00198             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00199                 creator.setVisible(<span class="keyword">false</span>);
00200             }
00201         });
00202 
00203         <span class="comment">// small hack to set the default button</span>
00204         <span class="keyword">this</span>.addHierarchyListener(<span class="keyword">new</span> HierarchyListener() {
00205             <span class="keyword">public</span> <span class="keywordtype">void</span> hierarchyChanged(HierarchyEvent e) {
00206                 <span class="keywordflow">if</span> (getRootPane().getDefaultButton() != closeButton) {
00207                     getRootPane().setDefaultButton(closeButton);
00208                 }
00209             }
00210         });
00211 
00212         <span class="comment">// avoid the need to press enter twise in the measurementRotationsField to close the window</span>
00213         measurementRotationsField.addActionListener(<span class="keyword">new</span> ActionListener() {
00214             <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {
00215                 closeButton.doClick();
00216             }
00217         });
00218     }
00219 
00220     {
00221 <span class="comment">// GUI initializer generated by IntelliJ IDEA GUI Designer</span>
00222 <span class="comment">// !!! IMPORTANT !!!</span>
00223 <span class="comment">// DO NOT EDIT OR ADD ANY CODE HERE!</span>
00224         $$$setupUI$$$();
00225     }
00226 
<a name="l00231"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel.html#d0">00231</a>     <span class="keyword">private</span> <span class="keywordtype">void</span> $$$setupUI$$$() {
00232         contentPane = <span class="keyword">new</span> JPanel();
00233         contentPane.setLayout(<span class="keyword">new</span> GridLayoutManager(3, 2, <span class="keyword">new</span> Insets(11, 11, 11, 11), -1, -1));
00234         <span class="keyword">final</span> JPanel panel1 = <span class="keyword">new</span> JPanel();
00235         panel1.setLayout(<span class="keyword">new</span> GridLayoutManager(2, 1, <span class="keyword">new</span> Insets(0, 4, 4, 4), -1, -1));
00236         contentPane.add(panel1,
00237                 <span class="keyword">new</span> GridConstraints(1, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00238                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00239                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00240         panel1.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), <span class="stringliteral">"Saved Sequences"</span>));
00241         <span class="keyword">final</span> JScrollPane scrollPane1 = <span class="keyword">new</span> JScrollPane();
00242         scrollPane1.setVerticalScrollBarPolicy(22);
00243         panel1.add(scrollPane1,
00244                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00245                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_WANT_GROW,
00246                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_WANT_GROW, null, null, null));
00247         sequencesTable = <span class="keyword">new</span> JTable();
00248         sequencesTable.setPreferredScrollableViewportSize(<span class="keyword">new</span> Dimension(200, 200));
00249         scrollPane1.setViewportView(sequencesTable);
00250         <span class="keyword">final</span> JPanel panel2 = <span class="keyword">new</span> JPanel();
00251         panel2.setLayout(<span class="keyword">new</span> GridLayoutManager(1, 2, <span class="keyword">new</span> Insets(0, 0, 0, 0), -1, -1));
00252         panel1.add(panel2,
00253                 <span class="keyword">new</span> GridConstraints(1, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00254                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00255                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00256         <span class="keyword">final</span> Spacer spacer1 = <span class="keyword">new</span> Spacer();
00257         panel2.add(spacer1,
00258                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_HORIZONTAL,
00259                         GridConstraints.SIZEPOLICY_WANT_GROW, 1, null, null, null));
00260         sequencesDeleteButton = <span class="keyword">new</span> JButton();
00261         sequencesDeleteButton.setText(<span class="stringliteral">"Delete Sequence"</span>);
00262         panel2.add(sequencesDeleteButton,
00263                 <span class="keyword">new</span> GridConstraints(0, 1, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_HORIZONTAL,
00264                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00265                         GridConstraints.SIZEPOLICY_FIXED, null, null, null));
00266         <span class="keyword">final</span> JPanel panel3 = <span class="keyword">new</span> JPanel();
00267         panel3.setLayout(<span class="keyword">new</span> GridLayoutManager(2, 1, <span class="keyword">new</span> Insets(0, 4, 4, 4), -1, -1));
00268         contentPane.add(panel3,
00269                 <span class="keyword">new</span> GridConstraints(0, 1, 2, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00270                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00271                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00272         panel3.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), <span class="stringliteral">"Default Columns"</span>));
00273         defaultColumnsPane = <span class="keyword">new</span> JPanel();
00274         panel3.add(defaultColumnsPane,
00275                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00276                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00277                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00278         <span class="keyword">final</span> Spacer spacer2 = <span class="keyword">new</span> Spacer();
00279         panel3.add(spacer2,
00280                 <span class="keyword">new</span> GridConstraints(1, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_VERTICAL, 1,
00281                         GridConstraints.SIZEPOLICY_WANT_GROW, null, null, null));
00282         <span class="keyword">final</span> JPanel panel4 = <span class="keyword">new</span> JPanel();
00283         panel4.setLayout(<span class="keyword">new</span> GridLayoutManager(1, 1, <span class="keyword">new</span> Insets(0, 4, 4, 4), -1, -1));
00284         contentPane.add(panel4,
00285                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00286                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00287                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00288         panel4.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), <span class="stringliteral">"Measurements"</span>));
00289         <span class="keyword">final</span> JPanel panel5 = <span class="keyword">new</span> JPanel();
00290         panel5.setLayout(<span class="keyword">new</span> GridLayoutManager(2, 3, <span class="keyword">new</span> Insets(0, 0, 0, 0), -1, -1));
00291         panel4.add(panel5,
00292                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00293                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00294                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00295         holderCalibrationCombo = <span class="keyword">new</span> JComboBox();
00296         panel5.add(holderCalibrationCombo,
00297                 <span class="keyword">new</span> GridConstraints(1, 1, 1, 2, GridConstraints.ANCHOR_WEST, GridConstraints.FILL_HORIZONTAL,
00298                         GridConstraints.SIZEPOLICY_CAN_GROW, GridConstraints.SIZEPOLICY_FIXED, null, null, null));
00299         <span class="keyword">final</span> JLabel label1 = <span class="keyword">new</span> JLabel();
00300         label1.setText(<span class="stringliteral">"Sample Holder Calibration"</span>);
00301         panel5.add(label1,
00302                 <span class="keyword">new</span> GridConstraints(1, 0, 1, 1, GridConstraints.ANCHOR_WEST, GridConstraints.FILL_NONE,
00303                         GridConstraints.SIZEPOLICY_FIXED, GridConstraints.SIZEPOLICY_FIXED, null, null, null));
00304         <span class="keyword">final</span> JLabel label2 = <span class="keyword">new</span> JLabel();
00305         label2.setText(<span class="stringliteral">"Measurement Rotations"</span>);
00306         panel5.add(label2,
00307                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_WEST, GridConstraints.FILL_NONE,
00308                         GridConstraints.SIZEPOLICY_FIXED, GridConstraints.SIZEPOLICY_FIXED, null, null, null));
00309         measurementRotationsField = <span class="keyword">new</span> JFormattedTextField();
00310         panel5.add(measurementRotationsField,
00311                 <span class="keyword">new</span> GridConstraints(0, 1, 1, 1, GridConstraints.ANCHOR_WEST, GridConstraints.FILL_HORIZONTAL,
00312                         GridConstraints.SIZEPOLICY_FIXED, GridConstraints.SIZEPOLICY_FIXED, null, <span class="keyword">new</span> Dimension(50, -1),
00313                         null));
00314         <span class="keyword">final</span> Spacer spacer3 = <span class="keyword">new</span> Spacer();
00315         panel5.add(spacer3,
00316                 <span class="keyword">new</span> GridConstraints(0, 2, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_HORIZONTAL,
00317                         GridConstraints.SIZEPOLICY_WANT_GROW, 1, null, null, null));
00318         <span class="keyword">final</span> JPanel panel6 = <span class="keyword">new</span> JPanel();
00319         panel6.setLayout(<span class="keyword">new</span> GridLayoutManager(1, 2, <span class="keyword">new</span> Insets(0, 0, 0, 0), -1, -1));
00320         contentPane.add(panel6,
00321                 <span class="keyword">new</span> GridConstraints(2, 0, 1, 2, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_BOTH,
00322                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00323                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW, null, null, null));
00324         closeButton = <span class="keyword">new</span> JButton();
00325         closeButton.setText(<span class="stringliteral">"Close"</span>);
00326         panel6.add(closeButton,
00327                 <span class="keyword">new</span> GridConstraints(0, 1, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_HORIZONTAL,
00328                         GridConstraints.SIZEPOLICY_CAN_SHRINK | GridConstraints.SIZEPOLICY_CAN_GROW,
00329                         GridConstraints.SIZEPOLICY_FIXED, null, null, null));
00330         <span class="keyword">final</span> Spacer spacer4 = <span class="keyword">new</span> Spacer();
00331         panel6.add(spacer4,
00332                 <span class="keyword">new</span> GridConstraints(0, 0, 1, 1, GridConstraints.ANCHOR_CENTER, GridConstraints.FILL_HORIZONTAL,
00333                         GridConstraints.SIZEPOLICY_WANT_GROW, 1, null, null, null));
00334     }
00335 
<a name="l00336"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html">00336</a>     <span class="keyword">private</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html">EditSequencesTableModel</a> <span class="keyword">extends</span> AbstractTableModel {
00337 
<a name="l00338"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#r0">00338</a>         <span class="keyword">private</span> <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a>[] sequences = <span class="keyword">new</span> <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a>[0];
00339 
<a name="l00340"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a0">00340</a>         <span class="keyword">public</span> <a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html">EditSequencesTableModel</a>() {
00341             updateSequences();
00342         }
00343 
<a name="l00348"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#d0">00348</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> updateSequences() {
00349 
00350             <span class="comment">// save selection</span>
00351             <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> selected = null;
00352             <span class="keywordtype">int</span> selectedRow = sequencesTable.getSelectedRow();
00353             <span class="keywordflow">if</span> (selectedRow &gt;= 0) {
00354                 selected = sequences[selectedRow];
00355             }
00356 
00357             <span class="comment">// update table data</span>
00358             sequences = <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.getSequences();
00359             sequencesTable.getSelectionModel().clearSelection();
00360             fireTableDataChanged();
00361 
00362             <span class="comment">// restore selection</span>
00363             <span class="keywordflow">if</span> (selected != null) {
00364                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sequences.length; i++) {
00365                     <span class="keywordflow">if</span> (sequences[i] == selected) {
00366                         sequencesTable.getSelectionModel().setSelectionInterval(i, i);
00367                         <span class="keywordflow">break</span>;
00368                     }
00369                 }
00370             }
00371         }
00372 
<a name="l00373"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a1">00373</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> getRowCount() {
00374             <span class="keywordflow">return</span> sequences.length;
00375         }
00376 
<a name="l00377"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a2">00377</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> getColumnCount() {
00378             <span class="keywordflow">return</span> 1;
00379         }
00380 
<a name="l00381"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a3">00381</a>         @Override <span class="keyword">public</span> <span class="keywordtype">boolean</span> isCellEditable(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a0">rowIndex</a>, <span class="keywordtype">int</span> columnIndex) {
00382             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00383         }
00384 
<a name="l00385"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a4">00385</a>         <span class="keyword">public</span> Object getValueAt(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a0">rowIndex</a>, <span class="keywordtype">int</span> columnIndex) {
00386             <span class="keywordflow">return</span> sequences[rowIndex].getName();
00387         }
00388 
<a name="l00396"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a5">00396</a>         @Override <span class="keyword">public</span> <span class="keywordtype">void</span> setValueAt(Object aValue, <span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a0">rowIndex</a>, <span class="keywordtype">int</span> columnIndex) {
00397             String name = aValue.toString();
00398             <a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> target = sequences[rowIndex];
00399 
00400             <span class="keywordflow">if</span> (target.<a class="code" href="classikayaki_1_1_measurement_sequence.html#a5">getName</a>().equals(name)) {
00401                 <span class="keywordflow">return</span>;     <span class="comment">// no change</span>
00402             }
00403 
00404             <span class="comment">// check for a duplicate name</span>
00405             <span class="keywordflow">for</span> (<a class="code" href="classikayaki_1_1_measurement_sequence.html">MeasurementSequence</a> sequence : sequences) {
00406                 <span class="keywordflow">if</span> (sequence.getName().equals(name)) {
00407                     <span class="keywordflow">return</span>;
00408                 }
00409             }
00410 
00411             <span class="comment">// set the new name</span>
00412             target.<a class="code" href="classikayaki_1_1_measurement_sequence.html#a6">setName</a>(name);
00413             <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.fireSequencesModified();
00414             updateSequences();
00415         }
00416 
<a name="l00420"></a><a class="code" href="classikayaki_1_1gui_1_1_program_settings_panel_1_1_edit_sequences_table_model.html#a6">00420</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> deleteSequence(<span class="keywordtype">int</span> <a class="code" href="namespaceikayaki_1_1gui.html#a26a0">rowIndex</a>) {
00421             <a class="code" href="classikayaki_1_1_settings.html">Settings</a>.removeSequence(sequences[rowIndex]);
00422             updateSequences();
00423         }
00424     }
00425 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed May 4 13:11:04 2005 for Squid by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
