<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Squid: My Documents/squid/src/ikayaki/gui/IntensityPlot.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">My Documents</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">squid</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">ikayaki</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">gui</a></div>
<h1>IntensityPlot.java</h1><a href="_intensity_plot_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * IntensityPlot.java</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2005 Project SQUID, http://www.cs.helsinki.fi/group/squid/</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * This file is part of Ikayaki.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Ikayaki is free software; you can redistribute it and/or modify</span>
00009 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00010 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00011 <span class="comment"> * (at your option) any later version.</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> * Ikayaki is distributed in the hope that it will be useful,</span>
00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
00016 <span class="comment"> * GNU General Public License for more details.</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00019 <span class="comment"> * along with Ikayaki; if not, write to the Free Software</span>
00020 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
00021 <span class="comment"> */</span>
00022 
00023 <span class="keyword">package </span>ikayaki.gui;
00024 
00025 <span class="keyword">import</span> ikayaki.MeasurementStep;
00026 <span class="keyword">import</span> ikayaki.MeasurementValue;
00027 <span class="keyword">import</span> ikayaki.Project;
00028 
00029 <span class="keyword">import</span> java.awt.*;
00030 <span class="keyword">import</span> java.awt.geom.Point2D;
00031 <span class="keyword">import</span> java.util.Vector;
00032 
<a name="l00038"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html">00038</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html">IntensityPlot</a> <span class="keyword">extends</span> <a class="code" href="classikayaki_1_1gui_1_1_abstract_plot.html">AbstractPlot</a> {
00039 
<a name="l00043"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">00043</a>     <span class="keyword">private</span> Vector&lt;Point2D&gt; <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">points</a> = <span class="keyword">new</span> Vector&lt;Point2D&gt;();
00044 
<a name="l00045"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r1">00045</a>     <span class="keyword">private</span> <a class="code" href="classikayaki_1_1_project.html">Project</a> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r1">project</a> = <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>;
00046 
<a name="l00047"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a0">00047</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a0">add</a>(<a class="code" href="classikayaki_1_1_measurement_step.html">MeasurementStep</a> step) {
00048         <span class="keywordflow">if</span> (step.<a class="code" href="classikayaki_1_1_measurement_step.html#a6">getProject</a>() != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00049             <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r1">project</a> = step.<a class="code" href="classikayaki_1_1_measurement_step.html#a6">getProject</a>();
00050         }
00051         Double <a class="code" href="namespaceikayaki_1_1gui.html#a26a3">value</a> = MeasurementValue.RELATIVE_MAGNETIZATION.getValue(step);
00052         <span class="keywordflow">if</span> (value != <a class="code" href="namespaceikayaki_1_1gui.html#a26a2">null</a>) {
00053             <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">points</a>.add(<span class="keyword">new</span> Point2D.Double(Math.max(step.<a class="code" href="classikayaki_1_1_measurement_step.html#a9">getStepValue</a>(), 0.0), Math.max(value.doubleValue(), 0.0)));
00054         }
00055     }
00056 
<a name="l00057"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a1">00057</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a1">reset</a>() {
00058         <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">points</a>.clear();
00059         repaint();
00060     }
00061 
<a name="l00062"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a2">00062</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a2">getNumMeasurements</a>() {
00063         <span class="keywordflow">return</span> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">points</a>.size();
00064     }
00065 
<a name="l00073"></a><a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a3">00073</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#a3">render</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, Graphics2D g2) {
00074         <span class="comment">// margin</span>
00075         <span class="keywordtype">int</span> m = 10;
00076         <span class="comment">// arrow width</span>
00077         <span class="keywordtype">int</span> aw = 4;
00078         <span class="comment">// arrow length</span>
00079         <span class="keywordtype">int</span> al = 8;
00080         <span class="comment">// y-axis padding from arrow top to max values</span>
00081         <span class="keywordtype">int</span> yPad = 20;
00082         <span class="comment">// x-axis padding from arrow top to max values</span>
00083         <span class="keywordtype">int</span> xPad = 20;
00084         <span class="comment">// maximum value of y-axis</span>
00085         <span class="keywordtype">double</span> yMax = 1.0;
00086         <span class="comment">// maximum value of x-axis</span>
00087         <span class="keywordtype">double</span> xMax = 100.0;
00088 
00089         <span class="keywordflow">for</span> (Point2D point : <a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r0">points</a>) {
00090             yMax = Math.max(yMax, point.getY());
00091             xMax = Math.max(xMax, point.getX() * 1.1);
00092         }
00093 
00094         <span class="comment">// pixels on y-area</span>
00095         <span class="keywordtype">int</span> yArea = getSize().height - ((2 * m) + yPad);
00096         <span class="comment">// pixels on x-area</span>
00097         <span class="keywordtype">int</span> xArea = getSize().width - ((2 * m) + xPad);
00098         <span class="comment">// font for texts</span>
00099         g2.setFont(<span class="keyword">new</span> Font(<span class="stringliteral">"Arial"</span>, Font.PLAIN, 8 + (Math.min(xArea, yArea) / 60)));
00100 
00101         <span class="comment">// x-fix</span>
00102         <span class="keywordtype">int</span> xFix = m + aw;
00103         <span class="comment">// y-fix</span>
00104         <span class="keywordtype">int</span> yFix = h - (m + aw);
00105 
00106         <span class="comment">// draw y-axis</span>
00107         g2.drawLine(xFix, m, xFix, yFix);
00108         <span class="comment">// draw x-axis</span>
00109         g2.drawLine(xFix, yFix, w - m, yFix);
00110         <span class="comment">// draw y-arrow</span>
00111         g2.drawLine(m, m + al, m + aw, m);
00112         g2.drawLine(m + (2 * aw), m + al, m + aw, m);
00113         <span class="comment">// draw x-arrow</span>
00114         g2.drawLine((w - m) - al, (h - m) - (2 * aw), w - m, (h - m) - aw);
00115         g2.drawLine((w - m) - al, h - m, w - m, (h - m) - aw);
00116 
00117         <span class="comment">// y-axis ticks</span>
00118         <span class="comment">// TODO draw ticks and numbers for y-axis</span>
00119         <span class="comment">// x-axis ticks</span>
00120         <span class="comment">// TODO draw ticks and numbers for x-axis</span>
00121         <span class="comment">// y-axis unit</span>
00122         g2.drawString(<a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a>.RELATIVE_MAGNETIZATION.getColumnName(<a class="code" href="classikayaki_1_1gui_1_1_intensity_plot.html#r1">project</a>), m + 30, m + 10);
00123         <span class="comment">// x-axis unit</span>
00124         g2.drawString(<a class="code" href="namespaceikayaki_1_1gui.html#a26">SequenceColumn</a>.STEP.getColumnName(project), (w - m) - 30, h - (m + 30));
00125         <span class="comment">// origo 0</span>
00126         g2.drawString(<span class="stringliteral">"0"</span>, m, h - m);
00127 
00128         <span class="comment">// draw points</span>
00129         <span class="keywordtype">int</span> ps = (Math.min(xArea, yArea) / 60) + 4; <span class="comment">// points size</span>
00130         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; points.size(); i++) {
00131             <span class="keywordtype">int</span> x = <span class="keyword">new</span> Double((points.elementAt(i).getX() / xMax) * xArea).intValue();
00132             <span class="keywordtype">int</span> y = <span class="keyword">new</span> Double((points.elementAt(i).getY() / yMax) * yArea).intValue();
00133             g2.fillOval((xFix + x) - (ps / 2), (yFix - y) - (ps / 2), ps, ps);
00134         }
00135         <span class="keywordflow">if</span> (points.size() &gt;= 2) {
00136             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; points.size(); i++) {
00137                 <span class="keywordtype">int</span> x1 = <span class="keyword">new</span> Double((points.elementAt(i - 1).getX() / xMax) * xArea).intValue();
00138                 <span class="keywordtype">int</span> y1 = <span class="keyword">new</span> Double((points.elementAt(i - 1).getY() / yMax) * yArea).intValue();
00139                 <span class="keywordtype">int</span> x2 = <span class="keyword">new</span> Double((points.elementAt(i).getX() / xMax) * xArea).intValue();
00140                 <span class="keywordtype">int</span> y2 = <span class="keyword">new</span> Double((points.elementAt(i).getY() / yMax) * yArea).intValue();
00141 
00142                 g2.drawLine(xFix + x1, yFix - y1, xFix + x2, yFix - y2);
00143             }
00144         }
00145 
00146 
00147     }
00148 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed May 4 13:11:03 2005 for Squid by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
