% estämme ihme "underfull \hbox (badness 10000)" -varoitukset (ei hajua mistä tulevat)
\hbadness=10000

\section{Introduction}
\label{sec:intro}

This document describes how this software (Ikayaki) is planned to be tested properly. Mainly this document concentrates on describing methods used for testing and test cases. It is important that all members of team to make tests in same way. This lowers possibility of testing conflicts and helps on integration test phase.

\section{Overview of testing the system}
\label{sec:overview}

Because program will be used to control a magnetometer, testing will be more important than in normal software engineering student projects. We will do unit testing for each class, integrate testing to program and use separate squid emulator to test squid interface system. 

In unit testing each class is tested independently. Unit testing will be done by using JUnit. Every programmer will test his own classes. Class should be tested when it is finished and corrected before integration test begins. 

Integration testing tests interfaces between classes. It will be done by going through all user interface protos and checking that all sections in requirements document can be done. Some critical sequences which are done many times with program should be done too.

Squid interface integration testing is done simulating real system with emulator. It will be done using Squid-emulator 
before testing it with real magnetometer. Squid-emulator runs in different machine 
and is connected by few (2-3) Serial I/O cables. Squid-emulator will be tested with old program (2G) same way before testing 
Ikayaki-system so that it will have all same tested properties which old program have and both systems have same results with squid 
emulator.

To verify that old program and new program works same way, we will do critical measurement with old program and emulator, save emulators 
log file and then use emulator with that log file and do same critical measurement with new program and see that both have same results.

If Rita testing utility is easy enough to use it will be used in testing. Tests will be constructed in such way that every line of code is visited at least once.

\section{Testing}
\label{sec:test}

\subsection{Unit Testing}
\label{unit}

Unit Testing is done for each class separately. Classes tested with JUnit have it's own ClassNameTest.java class in test-directory and gui-components are tested manually. They should be done before and during coding class. All test cases must be executable after classes are ready. Every class should be tested succesfully before integration tests.

All test cases are listed in section \ref{cases}.

\subsection{Integrity Testing}
\label{integrity}

Integrity testing is done after unit test is passed for all classes. Testing is done using squid emulator at first and finally with real Squid system.

Graphical User Interface is tested using all use cases from \ref{intcases}. If one fails, it is corrected immediatelly and all use cases must be done again. When all use cases are done without errors this phase is ready.

Interface testing is done with Emulator. Use cases are Automatic Measurement, Thellier Measurement and Manual Measurement with all variations (see Requirements Document). In first phase we use old program with emulator, save its log file and take results. After that we run it with new program and compare results. If they are not same, corrections are made immediatelly to new program and test is runned again. This is done until results are same for all use cases.

\subsection{Squid Emulator}
\label{emulator}

Squid emulator is tested with old program. Use cases are Automatic Measurement, Thellier Measurement and Manual Measurement with all variations (see Requirements Document). When all use cases can be done with emulator it is ready enough for integrity testing.

This should be done so that Old Program has same results with SQUID-system and emulator for all use cases. But we don't have resources for this. So this test only tells us that Old and New program works same way with squid emulator.

\subsection{Test Cases}
\label{cases}

\subsubsection{JUnit test cases}
\label{JUnit}

Here are listed JUnit test cases for <insert class names>. JUnit is introduced in section \ref{Junit-help}.

\subsubsubsection{SampleClass}
\label{cases:SampleClass}

\begin{enumerate}

\item Test1

Conditions:
\begin{itemize}
\item Cond1
\item Cond2
\end{itemize}

\item Test2

Conditions:
\begin{itemize}
\item Cond1
\end{itemize}

\end{enumerate}

\subsubsection{GUI-component test cases}
\label{guicase}

Here are listed test cases for gui-classes, these are done manually just clicking and changing values.

\subsubsubsection{SettingsPanel}
\label{cases:SettingsPanel}

\begin{enumerate}

\item Magnetometer,Handler and Degausser COM-port combobox

Conditions:
\begin{itemize}
\item Shows all COM-ports on system in alphabetical order
\item Loads correct COM port from Settings
\item Doesn't allow same value as in Handler and Magnetometer/Degausser COM-port comboboxes
\end{itemize}

\item Save button

Conditions:
\begin{itemize}
\item Only available if changes are made and values are permissible.
\item Unavailable on start
\item On click closes window and saved data correctly
\end{itemize}

\item Cancel button

Conditions:
\begin{itemize}
\item On click closes window and doesnt save changes
\item Always available
\end{itemize}

\item Calibration constants
\begin{itemize}
\item Loads data correctly from Settings
\item Accepts positive and negative decimal numbers
\end{itemize}

\item Degausser ramp
\begin{itemize}
\item Loads data correctly from Settings
\item Has only elements: 3,5,7,9
\end{itemize}

\item Degausser delay
\begin{itemize}
\item Loads data correctly from Settings
\item Has only elements: 1..9
\end{itemize}

\item Acceleration and deceleration fields
\begin{itemize}
\item Loads data correctly from Settings
\item Accepts only values in range of Integers 0..127
\end{itemize}

\item Velocity and velocity in measurement fields
\begin{itemize}
\item Loads data correctly from Settings
\item Accepts only values in range of Integers 50..20000
\end{itemize}

\item Translation positions fields
\begin{itemize}
\item Loads data correctly from Settings
\item Accepts only values in range of Integers 0..16777215
\end{itemize}

\item Right limit
\begin{itemize}
\item Loads data correctly from Settings
\item Has only elements: plus, minus
\end{itemize}

\item Rotation field
\begin{itemize}
\item Loads data correctly from Settings
\item Accepts positive and negative Integer numbers
\end{itemize}

\end{enumerate}

\subsubsubsection{className}
\label{cases:className}

\begin{enumerate}

\item Use case1
\begin{itemize}
\item Cond1
\item Cond2
\end{itemize}

\end{enumerate}

\subsection{Intergrity test case}
\label{intcase}

Here is test case which is done in integration phase to all components at same time. This is done in following order and must be repeated until done succesfully

\input{int_case}

\subsection{JUnit}
\label{JUnit-help}

JUnit is simple java-based framework for testing your java classes. We use it in this project for Unit Testing. For more information visit http://junit.sourceforge.net/.

First you need to download JUnit from http://sourceforge.net/project/showfiles.php?group \_id=15278 and extract it to directory (different than java directory) and set classpath for it.

Then you must write test class for every class to be tested. Test classes extend TestCase. They will have test methods, one for each Test Case. Test class also need suite()-method and Main for run. Sample test class:
{\tt
\begin{verbatim}
  import java.util.*;
  import junit.framework.*;

  public class SimpleTest extends TestCase {

  //Simple Test Case

  public void testEmptySimple() {
        Simple simple = new Simple();
        //New Simple must be empty
        assertTrue(simple.isEmpty());

  }

  public static Test suite() {
        return new TestSuite(SimpleTest.class);
  }

  public static void main(String args[]) {
        junit.textui.TestRunner.run(suite());
  }
}
\end{verbatim}
}

Type "java junit.swingui.TestRunner SimpleTest" to run test cases for Simple.