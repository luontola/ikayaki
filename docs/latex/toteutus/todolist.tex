\subsection{Ikayaki.java}

The MainStatusBar is not implemented, but when it is ready, it should be added to the JFrame in this class. For now that part of the code is commented out.


\subsection{MeasurementEvent.java}

\subsection{MeasurementListener.java}

\subsection{MeasurementResult.java}

\subsection{MeasurementSequence.java}

\subsection{MeasurementStep.java}

\subsection{MeasurementValue.java}

In the calculation of THETA63 it was a bit unclear, if the length of the full vectors should be summed (like it is now), or if the vectors should be normalized first (length=1). Fabio said that the way it is right now should be OK, but I understood it differently when reading the documents that Lauri gave.

The algorithms SIGNAL_TO_NOISE, SIGNAL_TO_DRIFT and SIGNAL_TO_HOLDER are missing descriptions. Right now they are used only in the MeasurementDetailsPanel, but it would be nicer to be able to show a tooltip with explanations for them. They could also be added as columns to the measurement sequence table.


\subsection{Project.java}

The DEBUG field is for bypassing the SQUID hardware and running dummy measurements which generate random data. Useful for testing the user interface without the need to go to the laboratory. The program has crashed lately a couple of times when running the dummy measurement, but there was no need and time to fix it, because the real measurements are working fine.

It would be nice to create a DTD for the XML documents written by the Project class. Especially when there comes the need to make improvements to the file format, having a DTD for each file format version will be useful in testing.

When changes to the project file format are made, the constructor Project(File,Document) should be made so, that when it encounters an old version, it will modify the Document object that was given as a parameter. When it has been modified to the new file format, the algorithms for the latest version will be used to create an instance of the Project class. This avoids the need to change the importing of older versions when new versions are made.

Exporting to a .SRM file is not implemented. There were no specifications as to what the file format is. It is not even sure, whether such a file format even exists or not.

In exportToTDT-method it is a bit unclear that how "the applied field value in mT" should be calculated. I have got the understanding that this program will not demagnetize the sample, so how will it then find out the "applied field value"?

In methods addSequence, addStep, removeStep and removeStep it might be better, that instead of returning a boolean value, they would throw an exception when somebody tries to modify the sequence when it is not allowed. This would help in finding bugs from the program, because nobody should call these methods in the first place when it is not allowed.

About the method doManualReset: it is not clear as to what it means to "reset the magnetometer". Find out what it means and make the method's documentation more detailed.

In doManualReset-method and Measurement-class there are some notes, that two methods in the Magnetometer class would be better when combined to just one method.


\subsection{ProjectEvent.java}

\subsection{ProjectListener.java}

\subsection{Settings.java}

Many of the methods are undocumented, especially in the case of device settings. Write better documentation for those.

About the handler's positions: it should be possible to allow also negative values, because the Handler class should be smart enough (it calculates the relative positions itself and tells the handler only that how many steps to move).

If any changes are made to the Settings class, special care should be made to go through every place where those properties are used. Especially the ranges of acceptable values need to be checked, because the user interface already does some checking on them.


\subsection{gui/AbstractPlot.java}

\subsection{gui/CalibrationPanel.java}

\subsection{gui/ComponentFlasher.java}

\subsection{gui/DeviceSettingsPanel.java}

There are many settings in Squid that apparently are not needed. So there is now only those which seems only to be needed.

There is no check if all systems have same port, only degausser and magnetometer can have same port.

Window cannot be closed with ESC-key as we wanted.


\subsection{gui/FittedComboBoxRenderer.java}

\subsection{gui/GenericFileFilter.java}

\subsection{gui/IntensityPlot.java}
        // TODO draw ticks and numbers for y-axis
        // x-axis ticks
        // TODO draw ticks and numbers for x-axis
        // y-axis unit
        // x-axis unit

\subsection{gui/MagnetometerStatusPanel.java}

If any two handler positions (read from Settings) are the same, the corresponding move-radiobuttons won't be moved correctly, as they are dumped into a TreeMap. There are no same positions in current lab setup, and don't know if there ever could be, so this won't matter. However, Device Configuration doesn't check what is inputted there, so let's just hope noone messes with those.

Call for updateButtonPositions(...) is in paintComponent, as otherwise the button positions won't stick; don't know what's the right place then for that method call.

Changing the "Measure BG"/"Measure XYZ" button text changes whole MagnetometerStatusPanel width; should prevent that somehow.


\subsection{gui/MainMenuBar.java}

The code for exporting SRM files is commented out, because there is not yet support for it in the Project class.


\subsection{gui/MainStatusBar.java}

This class has not been implemented. It could be used for displaying error messages and telling how many minutes the measurements will take (has also a progress bar). Tooltips and other help text could also be shown there.

One way might be to add a method to the Settings class, so that it would be easy to fire error messages from anywhere in the program, and they would be forwarded to the status bar. Use GUIDe to design the best way to use the status bar, if it is needed.


\subsection{gui/MainViewPanel.java}

There are no error messages created when communication with the SQUID can not be reached. Some message in status bar might be good. The old program gives a huge pile of popups, keep away from that anti-pattern. ;)

The button that is being used for hiding the project explorer tab, could be refactored to be an Action, so that it could be added to the MainMenuBar as a menu item.


\subsection{gui/MeasurementControlsPanel.java}

\subsection{gui/MeasurementDetailsPanel.java}

Make tooltips for the table headers. Look at how they were done in MeasurementSequencePanel.


\subsection{gui/MeasurementGraphsPanel.java}
        return; // TODO

\subsection{gui/MeasurementSequencePanel.java}
        // TODO: Put these same actions to the program's main menu. Each action might then need to find out the selected rows itself and monitor the ListSelectionModel.

\subsection{gui/MeasurementSequenceTableModel.java}

\subsection{gui/NullableDecimalFormat.java}

\subsection{gui/Plot.java}

\subsection{gui/PositiveDecimalFormat.java}

\subsection{gui/PrintPanel.java}

\subsection{gui/ProgramSettingsPanel.java}

\subsection{gui/ProjectComponent.java}


\subsection{gui/ProjectExplorerPanel.java}

Cycling through popup menu list with up/down keys changes directory; it shouldn't, but can't recognize those changed-events from mouse clicks.

When mouseclicking autocomplete list item, textfield gets cleared because of setBrowserFieldPopup(...); no easy way around this, as other ways tried cause more other problems.

Many problems here arise from the fact that JComboBox isn't designed for recklessly changing popup menu contents (as we swap between directory history and autocomplete results). It might have been better to make an own component here, instead of using JComboBox, as now the whole thing has a lot of bubblegun stitching. But, it's good enough now.


\subsection{gui/ProjectExplorerTable.java}

Table columns have no indication for sort column, as Esko didn't like the *-indicator :)
	    
ProjectExplorerPopupMenu uses new File("A:/") for disk drive; should be changed for any linux/etc porting.

SRM export is commented out, as it's not supported (in Project).

There are no messages telling if exporting was succesful or not (as I didn't want any popups for it)... Also, exporting overwrites any previous files with the same name; this might be just what the user wants, but it could also cause an unhappy surprise.


\subsection{gui/ProjectInformationPanel.java}

\subsection{gui/SequenceColumn.java}
        // TODO: remove the need for this hack
            setNumberFormat(new DecimalFormat("0.000E0"));  // TODO: maybe make a new class that could show the format: 1.123e+05

\subsection{gui/SettingsDialog.java}

\subsection{gui/StereoPlot.java}

\subsection{gui/StyledCellEditor.java}

\subsection{gui/StyledTableCellRenderer.java}

\subsection{gui/StyledWrapper.java}
//        public Insets insets = null; // TODO: is this also necessary?

\subsection{squid/Degausser.java}

This class seems to work alright, but there is some issues which are uncertain. It have not been tested so that Degausser and Magnetometer are in same port, more likely there will be many problems. This class trusts that everything goes alright, would be good to confirm status sometimes and check that everything is going well. ExecuteRampUp() and executeRampDown() are not used because there is risk that ramp stays up, executeRampCycle is only used.

\subsection{squid/Handler.java}

Estimated movement does not calculate acceleration so its not exactly correct, but works well enough.

\subsection{squid/Magnetometer.java}

This class seems to work alright, but there is some issues which are uncertain. It have not been tested so that Degausser and Magnetometer are in same port, more likely there will be many problems. We only use filter 1x and range 1x and disable fast-slew, no idea if other options are needed for these. And we do not check status from magnetometer, we just hope all goes well. In measuring we do not Never use flux counting, never be needed tough.

\subsection{squid/SerialIO.java}

\subsection{squid/SerialIOEvent.java}

\subsection{squid/SerialIOException.java}

\subsection{squid/SerialIOListener.java}

\subsection{squid/SerialParameters.java}

\subsection{squid/Squid.java}

There is no functionality for UpdateSettings(), so when settings are changed program needs to be restarted. This should be corrected as it was planned. And there is no call from DeviceSettings for this.

\subsection{squid/SquidEmulator.java}

No further development needed. Was only little help on testing and wad dumped soon after testing in laboratorium.

\subsection{squid/SquidFront.java}

No further development needed. Have been used for testing some commands, but human control is too risky as we noticed.
